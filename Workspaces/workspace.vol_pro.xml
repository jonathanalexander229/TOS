<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<PREFERENCES VERSION="7">
  <WORKSPACE ACCOUNT_MODELS="ABRWVE1fU0VSSUFMSVpBVElPTl9WMAAAAAEAFFZBTV9TRVJJQUxJWkFUSU9OX1Yzf_C9wAAAAA9WaXJ0dWFsIEFjY291bnQAAAAAAAAAAAAAAAIAAAAAf_C9wQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH_wvcAAAAAAAAAAA1VTJAADVVMkAARDQVNIQPhqAAAAAAAAAAAAAAAAAAADRk5EAAVWQUxJRAAJRGVtbyBDYXNoAAAAAAAAAAAAAAROT05FAAAAAH_wvcIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB_8L3AAAAAAAAAAAZVU0QkRlgAA1VTRAAKRk9SRVhfQ0FTSED4agAAAAAAAAAAAAAAAAAAA0ZORAAFVkFMSUQAD0RlbW8gRm9yZXggQ2FzaAAAAAAAAAAAAAAETk9ORQ==" POSITION="1714138200000">
    <DETACHED_FRAME_0 ALWAYS_ON_TOP="false" HEIGHT="1080" LAYOUT="MAIN" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1920" X="0" Y="1080">
      <AUDIO URL=""/>
      <COM.DEVEXPERTS.TOS.UI.USER.ALERT.LASTSOUNDTAGKEY LAST_SOUNDTAG="Bell"/>
      <DESKTOP ALERTS_THINK_SCRIPT_EDITOR_HEIGHT="530" ALERTS_THINK_SCRIPT_EDITOR_WIDTH="850" ALERTS_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" ALERTS_THINK_SCRIPT_HELP_DIVIDER_LOCATION="176" ALERTS_THINK_SCRIPT_SIDE_PANEL_WIDTH="283" ALLOCATION_MODE="Single Account" CUSTOM_QUOTES_THINK_SCRIPT_EDITOR_HEIGHT="400" CUSTOM_QUOTES_THINK_SCRIPT_EDITOR_WIDTH="1000" CUSTOM_QUOTES_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" CUSTOM_QUOTES_THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" CUSTOM_QUOTES_THINK_SCRIPT_SIDE_PANEL_WIDTH="333" FILTERS_THINK_SCRIPT_EDITOR_HEIGHT="400" FILTERS_THINK_SCRIPT_EDITOR_WIDTH="1000" FILTERS_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" FILTERS_THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" FILTERS_THINK_SCRIPT_SIDE_PANEL_WIDTH="333" LAST_USED_LAYOUT="TOS CHARTS" MRU_SYMBOLS="SPX,COMP:GIDS,RUT,$VOLD,SMH,/ES:XCME,/NQU24:XCME,AMD,META,AVGO,TSLA,SCHW,QQQ,SPY,MSFT,AAPL,NVDA,SMCI,/MES:XCME,/NQ:XCME" ORDER_THINK_SCRIPT_EDITOR_HEIGHT="530" ORDER_THINK_SCRIPT_EDITOR_WIDTH="850" ORDER_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" ORDER_THINK_SCRIPT_HELP_DIVIDER_LOCATION="176" ORDER_THINK_SCRIPT_SIDE_PANEL_WIDTH="283" PATTERN_EDITOR_DIVIDER="400" PATTERN_EDITOR_HEIGHT="800" PATTERN_EDITOR_WIDTH="1000" SAVE_ALLOCATION_MODE="false" SHOW_MARKET_DATA_PERMISSIONS_WARNING="None" THINK_SCRIPT_ALERT_AUTOCOMPLETE="true" THINK_SCRIPT_ALERT_POPUP_HELP="true" THINK_SCRIPT_EDITOR_FONT_FAMILY="Monospaced" THINK_SCRIPT_EDITOR_FONT_SIZE="16" THINK_SCRIPT_EDITOR_HEIGHT="400" THINK_SCRIPT_EDITOR_WIDTH="1000" THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" THINK_SCRIPT_SIDE_PANEL="Reference" THINK_SCRIPT_SIDE_PANEL_WIDTH="333" UD_WARNING="true">
        <ACCNT_STMT/>
        <ACCOUNT_GROUP FOREX_REPORT_LAYOUT_CONFIG="{&#10;ORDER_ENTRY_EXPANDED=false&#10;}&#10;" ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="MONITOR">
          <FX_REPORT ORDER_ENTRY_EXPANDED="false"/>
        </ACCOUNT_GROUP>
        <ACTIVE_ACCOUNT_HEADLINE>
          <ACTIVE_ACCOUNT COMPONENTS="OPTION_BP,DTBP,CASH_AND_MONEY_MARKET_FUNDS" ITEM_DISPLAY_MODE="HIDE_UNSED"/>
        </ACTIVE_ACCOUNT_HEADLINE>
        <ACTIVE_TRADER/>
        <ALERTS/>
        <ALLOCATION QUANTITIES=""/>
        <ANALYZE_GROUP ORDER_ENTRY_EXPANDED="false" PALETTE="ff66ff,ffff,ff7e9c,b5b5b5,e7be00,ff5f5f,c531,797979,f9e9a7,ffffff,ff7e00,c0bfff,f6bcb3,74bde8,ea88ff,8fefbf" SELECTED_LAYOUT="THINK BACK" SYMBOL_GROUP="1">
          <ADD_SIMULATED_TRADES/>
          <DROPDOWN EXPANDED="true"/>
          <DROPDOWN1 EXPANDED="false"/>
          <FUTURES EXPANDED="true"/>
          <OPTIONS_CHART_PANEL DELTA_SUBGRAPH="false" HIGHLIGHT_TICKS="false" LOCK_TIME_AXIS="false" PALETTE="ff66ff,ffff,ff7e9c,b5b5b5,e7be00,ff5f5f,c531,797979,f9e9a7,ffffff,ff7e00,c0bfff,f6bcb3,74bde8,ea88ff,8fefbf" PERCENT_AXIS="false" PRODUCT_DEPTH_MODE="FUTURES">
            <COMBO_CHECK_BOX COLORS="" SELECTION=""/>
            <FUTURES_CURVES CURVES_COUNT="1">
              <CURVE_0 COLOR="-65536" DATE="-1" IS_HIDDEN="false" PRICE_TYPE="mark" SYMBOL="/MES:XCME"/>
            </FUTURES_CURVES>
            <OPTIONS_CHART/>
            <OPTIONS_CHART_CONTROLS STRIKE_COUNT="All" VALUE="IMPL_VOL" VALUE2="IMPL_VOL" VIEW="ALL"/>
          </OPTIONS_CHART_PANEL>
          <OPTIONS_STATISTIC EXPANDED="false"/>
          <OPTIONS_TIME_AND_SALES ALL_CONDITIONS="true" ALL_EXCHANGES="true" ALL_PRICE="true" ALL_QUANTITIES="true" ALL_SERIES="true" ALL_STRIKES="true" EXPANDED="false" SELECTED_CONDITIONS="" SELECTED_EXCHANGES="" SELECTED_SERIES="" SELECTED_SIDE="BOTH"/>
          <OPTION_CHAIN EXPANDED="true"/>
          <PROBABILITY_ANALYSIS/>
          <PRODUCT_DEPTH EXPANDED="false"/>
          <QSHEETPANEL QSHEET_CONFIGURATION_COLUMNS="LASTX,NET_CHANGE" STRIKE_QTY="4">
            <ALLPRODUCTSPANELSMODEL>
              <OPTION_CHAIN ORDERING="2" SWITCHED_ON="true"/>
              <OPTION_STATISTICS ORDERING="3" SWITCHED_ON="true"/>
              <OPTION_TIME_AND_SALES ORDERING="4" SWITCHED_ON="true"/>
              <TRADE_GRID ORDERING="1" SWITCHED_ON="true"/>
              <UNDERLYING ORDERING="0" SWITCHED_ON="true"/>
              <WIDGET_360 ORDERING="5" SWITCHED_ON="true"/>
            </ALLPRODUCTSPANELSMODEL>
            <OPTIONSLISTPANEL/>
            <OPTIONS_SELECT TEMPLATE_FILTER_NAME="Single">
              <FUTURES_FILTER_NAME ALL_DELIVERABLES="true" ALL_EXCHANGES="true" ALL_EXPIRATION_DAYS="true" ALL_EXPIRATION_TYPES="true" ALL_SIDES="true" ALL_STRIKES="true" SELECTED_DELIVERABLES="REGULAR" SELECTED_EXCHANGES="COMPOSITE" SELECTED_EXPIRATION_TYPES="REGULAR" SELECTED_SIDE="BOTH" THEO_ADJ_TYPE="DOLLAR" THEO_VOL_ADJ="0.0">
                <THEO_ADJ_VALUES_NAME DOLLAR="0.0" PERCENT="0.0" SIGMA="0.0"/>
              </FUTURES_FILTER_NAME>
              <STOCK_FILTER_NAME ALL_DELIVERABLES="true" ALL_EXCHANGES="true" ALL_EXPIRATION_DAYS="true" ALL_EXPIRATION_TYPES="true" ALL_SIDES="true" ALL_STRIKES="true" SELECTED_DELIVERABLES="REGULAR" SELECTED_EXCHANGES="COMPOSITE" SELECTED_EXPIRATION_TYPES="REGULAR" SELECTED_SIDE="BOTH" THEO_ADJ_TYPE="DOLLAR" THEO_VOL_ADJ="0.0">
                <THEO_ADJ_VALUES_NAME DOLLAR="0.0" PERCENT="0.0" SIGMA="0.0"/>
              </STOCK_FILTER_NAME>
            </OPTIONS_SELECT>
          </QSHEETPANEL>
          <RISK_PROFILE>
            <CHART_PANEL/>
          </RISK_PROFILE>
          <SIMULATION_PANEL SLICE_EXPAND="false" TRADES_EXPANDED="">
            <BALANCES UNSELECTED=""/>
            <TRADES>
              <PRICE_SLICES/>
            </TRADES>
          </SIMULATION_PANEL>
          <SORTING/>
          <SORTING1/>
          <SORTING10/>
          <SORTING100/>
          <SORTING101/>
          <SORTING102/>
          <SORTING103/>
          <SORTING104/>
          <SORTING105/>
          <SORTING106/>
          <SORTING107/>
          <SORTING108/>
          <SORTING109/>
          <SORTING11/>
          <SORTING110/>
          <SORTING111/>
          <SORTING112/>
          <SORTING113/>
          <SORTING114/>
          <SORTING115/>
          <SORTING116/>
          <SORTING117/>
          <SORTING118/>
          <SORTING119/>
          <SORTING12/>
          <SORTING120/>
          <SORTING121/>
          <SORTING122/>
          <SORTING123/>
          <SORTING124/>
          <SORTING125/>
          <SORTING126/>
          <SORTING127/>
          <SORTING128/>
          <SORTING129/>
          <SORTING13/>
          <SORTING130/>
          <SORTING131/>
          <SORTING132/>
          <SORTING133/>
          <SORTING134/>
          <SORTING135/>
          <SORTING136/>
          <SORTING137/>
          <SORTING138/>
          <SORTING139/>
          <SORTING14/>
          <SORTING140/>
          <SORTING141/>
          <SORTING142/>
          <SORTING143/>
          <SORTING144/>
          <SORTING145/>
          <SORTING146/>
          <SORTING147/>
          <SORTING148/>
          <SORTING149/>
          <SORTING15/>
          <SORTING150/>
          <SORTING151/>
          <SORTING152/>
          <SORTING153/>
          <SORTING154/>
          <SORTING155/>
          <SORTING156/>
          <SORTING157/>
          <SORTING158/>
          <SORTING159/>
          <SORTING16/>
          <SORTING160/>
          <SORTING161/>
          <SORTING162/>
          <SORTING163/>
          <SORTING164/>
          <SORTING165/>
          <SORTING166/>
          <SORTING167/>
          <SORTING168/>
          <SORTING169/>
          <SORTING17/>
          <SORTING170/>
          <SORTING171/>
          <SORTING172/>
          <SORTING173/>
          <SORTING174/>
          <SORTING175/>
          <SORTING176/>
          <SORTING177/>
          <SORTING178/>
          <SORTING179/>
          <SORTING18/>
          <SORTING180/>
          <SORTING181/>
          <SORTING182/>
          <SORTING183/>
          <SORTING184/>
          <SORTING185/>
          <SORTING186/>
          <SORTING187/>
          <SORTING188/>
          <SORTING189/>
          <SORTING19/>
          <SORTING190/>
          <SORTING191/>
          <SORTING192/>
          <SORTING193/>
          <SORTING194/>
          <SORTING195/>
          <SORTING196/>
          <SORTING197/>
          <SORTING198/>
          <SORTING199/>
          <SORTING2/>
          <SORTING20/>
          <SORTING200/>
          <SORTING201/>
          <SORTING202/>
          <SORTING203/>
          <SORTING204/>
          <SORTING205/>
          <SORTING206/>
          <SORTING207/>
          <SORTING208/>
          <SORTING209/>
          <SORTING21/>
          <SORTING210/>
          <SORTING211/>
          <SORTING212/>
          <SORTING213/>
          <SORTING214/>
          <SORTING215/>
          <SORTING216/>
          <SORTING217/>
          <SORTING218 COLUMN="EXPIRATION" ORDER="1"/>
          <SORTING219/>
          <SORTING22/>
          <SORTING23/>
          <SORTING24/>
          <SORTING25/>
          <SORTING26/>
          <SORTING27/>
          <SORTING28/>
          <SORTING29/>
          <SORTING3/>
          <SORTING30/>
          <SORTING31/>
          <SORTING32/>
          <SORTING33/>
          <SORTING34/>
          <SORTING35/>
          <SORTING36/>
          <SORTING37/>
          <SORTING38/>
          <SORTING39/>
          <SORTING4/>
          <SORTING40/>
          <SORTING41/>
          <SORTING42/>
          <SORTING43/>
          <SORTING44/>
          <SORTING45/>
          <SORTING46/>
          <SORTING47/>
          <SORTING48/>
          <SORTING49/>
          <SORTING5/>
          <SORTING50/>
          <SORTING51/>
          <SORTING52/>
          <SORTING53/>
          <SORTING54/>
          <SORTING55/>
          <SORTING56/>
          <SORTING57/>
          <SORTING58/>
          <SORTING59/>
          <SORTING60/>
          <SORTING61/>
          <SORTING62/>
          <SORTING63/>
          <SORTING64/>
          <SORTING65/>
          <SORTING66/>
          <SORTING67/>
          <SORTING68/>
          <SORTING69/>
          <SORTING70/>
          <SORTING71/>
          <SORTING72/>
          <SORTING73/>
          <SORTING74/>
          <SORTING75/>
          <SORTING76/>
          <SORTING77/>
          <SORTING78/>
          <SORTING79/>
          <SORTING8/>
          <SORTING80/>
          <SORTING81/>
          <SORTING82/>
          <SORTING83/>
          <SORTING84/>
          <SORTING85/>
          <SORTING86/>
          <SORTING87/>
          <SORTING88/>
          <SORTING89/>
          <SORTING9/>
          <SORTING90/>
          <SORTING91/>
          <SORTING92/>
          <SORTING93/>
          <SORTING94/>
          <SORTING95 COLUMN="EXPIRATION" ORDER="1"/>
          <SORTING96/>
          <SORTING97/>
          <SORTING98/>
          <SORTING99/>
          <TRADE_GRID COLUMN_COUNT="3" DEFAULT_TYPE="LEVEL_II" EXPANDED="false" ROW_COUNT="1">
            <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_3>
              </TRADE>
            </CELL0>
            <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_3>
              </TRADE>
            </CELL1>
            <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_0>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                    <OFFSET_PER_SYMBOL/>
                  </TRG_1>
                </_3>
              </TRADE>
            </CELL2>
            <MODELNODE0 COUNT="3" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.0">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
              <MODELNODE2 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
            </MODELNODE0>
          </TRADE_GRID>
          <UNDERLYING1 EXPANDED="true"/>
          <UNDERLYING_PANEL FUTURES_DISPLAYING_MODE="ACTIVE ONLY"/>
        </ANALYZE_GROUP>
        <CALENDAR/>
        <CAPTIONS ENABLED="false"/>
        <CHART/>
        <CHARTING CHART_GROUP_MANAGER="@v10@%0:com.devexperts.toschart.facade.persistence,1:java.util,2:com.devexperts.toschart.model%#%0.ChartGroupManagerPersistence{encodedMyToolsModel=&quot;{\&quot;items\&quot;:[{\&quot;tool\&quot;:\&quot;TRENDLINE\&quot;,\&quot;name\&quot;:\&quot;\&quot;},{\&quot;tool\&quot;:\&quot;TEXT_NOTE\&quot;,\&quot;name\&quot;:\&quot;\&quot;},{\&quot;loadedName\&quot;:\&quot;SimpleMovingAvg\&quot;,\&quot;type\&quot;:\&quot;STUDY\&quot;,\&quot;name\&quot;:\&quot;SimpleMovingAvg\&quot;}],\&quot;toggledItemIndex\&quot;:-1,\&quot;mode\&quot;:\&quot;SINGLE_CHART\&quot;,\&quot;viewMode\&quot;:\&quot;OFF\&quot;}&quot;,generalProperties=#%1.HashMap{^(&quot;quickTimeFrames&quot;,&quot;[1d:m, 5d:5m, 5d:15m, 10d:30m, 20d:h, 180d:4h, 1y:d, 3y:w, 1d:3m, 1d:2m]&quot;),^(&quot;majorTimeZoneIds&quot;,#java.lang.String[10]{0=&quot;America/New_York&quot;,1=&quot;America/Chicago&quot;,2=&quot;America/Denver&quot;,3=&quot;America/Los_Angeles&quot;,4=&quot;Europe/London&quot;,5=&quot;Europe/Berlin&quot;,6=&quot;Europe/Moscow&quot;,7=&quot;Asia/Hong_Kong&quot;,8=&quot;Asia/Tokyo&quot;,9=&quot;Australia/Sydney&quot;}),^(&quot;timezone&quot;,&quot;America/Chicago&quot;)},groups=#%1.ArrayList{+(#%0.ChartGroupPersistence{groupId=&quot;isolated&quot;,properties=#%1.HashMap{^(&quot;hideStatusString&quot;,&lt;T),^(&quot;databoxPin&quot;,&lt;T),^(&quot;databoxMode&quot;,!java.lang.Enum.valueOf:DataBoxMode0(*%2.DataBoxMode.class,&quot;NONE&quot;))}}),+(#%0.ChartGroupPersistence{groupId=&quot;default&quot;,properties=#%1.HashMap{^(&quot;hideStatusString&quot;,&lt;T),^(&quot;databoxPin&quot;,&lt;T),^(&quot;databoxMode&quot;,@DataBoxMode0)}})}}" CORRECTIONS="" DISABLED_MESSAGES=""/>
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <CHAT>
          <HIDDEN_USERS/>
        </CHAT>
        <COM.DEVEXPERTS.TOS.UI.USER.TFACE.GADGETSIDEBARSPLITPANE DIVIDER_LAST_LOCATION="0.0" DIVIDER_LOCATION="20.0"/>
        <CONFIG PRIVACY_MODE="false"/>
        <CONFIGURABLE_TAB SLIDER_PINNED="false"/>
        <DISCLOSURES/>
        <DUMMY/>
        <EARNINGS_LAYOUT CURRENT_VIEW="FIT_ALL" ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1">
          <EARNING_SETTINGS>
            <COMPARE_MODE_MODEL_KEY>
              <CHART_SELECTION_KEY ITEMS=""/>
              <QUARTERS_SELECTION_KEY ITEMS=""/>
            </COMPARE_MODE_MODEL_KEY>
            <FIT_ALL_SETTINGS RELEASECOLOR="-1589760" WALL_STREETCOLOR="-16726735">
              <EST_SETTINGS_KEY ITEMS=""/>
              <EST_SRC_KEY ITEMS=""/>
              <VOL_OPT_KEY ITEMS=""/>
            </FIT_ALL_SETTINGS>
          </EARNING_SETTINGS>
        </EARNINGS_LAYOUT>
        <ERROR_REPORT AUTO_SEND_REPORT="true"/>
        <FLEX ORDER_ENTRY_EXPANDED="false">
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 NAME="1724413231166" TYPE="LEAF" WEIGHT="0.5">
              <GADGET SELECTED_TYPE="CHART">
                <CHART/>
              </GADGET>
            </MODELNODE0>
            <MODELNODE1 COUNT="3" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5">
              <MODELNODE0 NAME="1724413231167" TYPE="LEAF" WEIGHT="0.0">
                <GADGET SELECTED_TYPE="CHART">
                  <CHART/>
                </GADGET>
              </MODELNODE0>
              <MODELNODE1 NAME="1724413231168" TYPE="LEAF" WEIGHT="0.0">
                <GADGET SELECTED_TYPE="CHART">
                  <CHART/>
                </GADGET>
              </MODELNODE1>
              <MODELNODE2 NAME="1724413231169" TYPE="LEAF" WEIGHT="0.0">
                <GADGET SELECTED_TYPE="CHART">
                  <CHART/>
                </GADGET>
              </MODELNODE2>
            </MODELNODE1>
          </MODELNODE0>
        </FLEX>
        <FOREX_TRADER/>
        <FRED FRED_CATALOGUE="{&quot;selectedLevel&quot;:&quot;first_level&quot;,&quot;columns&quot;:[]}" FRED_CHART="{&quot;subscriptionKey&quot;:{&quot;instrument&quot;:{&quot;symbol&quot;:&quot;&quot;,&quot;description&quot;:&quot;&quot;,&quot;frequencyType&quot;:&quot;DAILY&quot;,&quot;parentCategoryIds&quot;:[],&quot;fredUnits&quot;:&quot;&quot;,&quot;fredUnitsShort&quot;:&quot;&quot;,&quot;observationStartDate&quot;:0,&quot;observationEndDate&quot;:0,&quot;popularity&quot;:0,&quot;seasonalAdjustmentType&quot;:&quot;NOT_APPLICABLE&quot;},&quot;transformationParameters&quot;:{&quot;frequency&quot;:&quot;DEFAULT&quot;,&quot;aggregation&quot;:&quot;AVERAGE&quot;,&quot;unit&quot;:&quot;DEFAULT&quot;,&quot;indexDate&quot;:0},&quot;timeRange&quot;:{}},&quot;paintingSettings&quot;:{&quot;chartType&quot;:&quot;LINE&quot;,&quot;plotColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:1},&quot;backgroundColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:0},&quot;showGrid&quot;:true,&quot;shadeRecession&quot;:true,&quot;gridColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:2},&quot;crossType&quot;:&quot;FULL_CROSS&quot;,&quot;crossColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:3}}}" FRED_STATE="CATEGORIES" ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1"/>
        <FUNDAMENTALS ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1">
          <DEFAULT/>
          <ETF/>
          <FUTURES>
            <CONTRACT_PROFILE EXPANDED="true" INDEX="0" SWITCHED_ON="true"/>
            <OVERVIEW EXPANDED="true" INDEX="0"/>
            <SORTING/>
          </FUTURES>
          <STOCK>
            <BY_THE_NUMBERS ANNUAL_MODE="ANNUAL" EXPANDED="true" INDEX="1" SWITCHED_ON="true"/>
            <COMPANY_DETAILS EXPANDED="true" INDEX="2" SWITCHED_ON="true"/>
            <COMPANY_PROFILE EXPANDED="true" INDEX="0" SWITCHED_ON="true"/>
            <OVERVIEW EXPANDED="true" INDEX="0"/>
            <TREFIS_DRIVERS_PANEL/>
            <WHAT_DRIVES_THE_STOCK EXPANDED="true" INDEX="3" SWITCHED_ON="true">
              <SANKEY_CHART SANKEY_CHART_NODE="idSCHW.0002,"/>
              <TREFISUSERMODIFICATIONS TREFISVALUEFORMATTER="SANKEY_PERCENT_VALUE_FORMATTER"/>
            </WHAT_DRIVES_THE_STOCK>
          </STOCK>
        </FUNDAMENTALS>
        <FUTURES_TRADER/>
        <GADGETS>
          <SCRATCHPAD DOC="&lt;html id=&quot;scratchpad&quot;&gt;&lt;/html&gt;"/>
        </GADGETS>
        <GADGET_STACK_LAYOUT SCROLL_POSITION="0">
          <GADGET0 EXPANDED="true" GADGET_NAME="Account Info" LOCKED="true">
            <ACTIVE_ACCOUNT COMPONENTS="OPTION_BP,FX_BP,NET_LIQ,DTBP,DT_LEFT,CASH_AND_MONEY_MARKET_FUNDS,INTRADAY_LIQ_FUNDS,AVAILABLE_FUNDS_FOR_TRADING,FUTURES_VOLUME_MTD" ITEM_DISPLAY_MODE="HIDE_UNSED"/>
          </GADGET0>
          <GADGET1 EXPANDED="true" GADGET_NAME="Live News" HEIGHT="175" LOCKED="false">
            <LIVE_NEWS KEYWORD="" SYMBOL_FILTER_WATCHLIST="0" SYMBOL_GROUP="-1">
              <SORTING COLUMN="TIME" ORDER="-1"/>
            </LIVE_NEWS>
          </GADGET1>
          <GADGET2 EXPANDED="true" GADGET_NAME="Watchlist" HEIGHT="153" LOCKED="false">
            <SORTING/>
            <WATCHLIST COLUMNS="SYMBOL:50:,LAST:46:,NET_CHANGE:51:,BID:43:,ASK:43:,&lt;arrow&gt;:11:F:F" COMPLEX_COLUMNS="VolSizzle:S,CUSTOM17:C,CUSTOM16:S,CUSTOM15:S,CUSTOM14:S,CUSTOM13:S,CUSTOM12:S,CUSTOM11:S,CUSTOM10:S,MoneyFlowIndex:S,ADXBreakoutsFilter:S,MoneyFlowIndexCrossover:S,ADXCrossover:S,CUSTOM19:S,CUSTOM18:S,CUSTOM7:S,CUSTOM8:S,CUSTOM5:S,PercentChg:S,CUSTOM6:S,CUSTOM3:S,CUSTOM4:S,CUSTOM1:S,SimpleMovingAvg:S,CUSTOM2:S,MoneyFlow:S,RSI:S,DailySMA:S,PairRatio:S,VolumeAvg:S,CUSTOM9:S,TTM_Squeeze:S,CUSTOM24:S,CUSTOM22:S,CUSTOM21:S,MarketSentiment:S,MoneyFlowOscillator:S,Spreads:S,PairCorrelation:S" SYMBOL_GROUP="2" WATCH_LIST_ID="24729232"/>
          </GADGET2>
          <GADGET3 EXPANDED="true" GADGET_NAME="Quick Chart" HEIGHT="208" LOCKED="false">
            <QUICK_CHART_GADGET>
              <CHART CONFIGURATION="@v10@#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[],\\\&quot;allDivisions\\\&quot;:[]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[],\\\&quot;allDivisions\\\&quot;:[]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings.candleTrendTypeColors.!isFillDown:Boolean1,overlappedVolume=@Boolean1,showBubbles=@Boolean0,showExpFriday=@Boolean0},otherStyleSettings.showCorpActions=@Boolean0},subgraphModels.!get(#com.devexperts.toschart.control.subgraph.SubgraphId(&quot;Volume&quot;)){height=80}}" SYMBOL_GROUP="2"/>
            </QUICK_CHART_GADGET>
          </GADGET3>
        </GADGET_STACK_LAYOUT>
        <HELP/>
        <HELP_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="HELP"/>
        <HOMESCREEN DIVIDER_LOCATION="1290" ORDER_ENTRY_EXPANDED="false">
          <TICKERTAPE WATCHLISTID="500"/>
          <TRADER_TV_VIDEO_PANEL STREAM_NAME="SCHWAB_TV_STREAM" VOLUME_LEVEL="100"/>
          <WIDGET_DASHBOARD COLUMNS="2" ROWS="3">
            <WIDGET_FRAME0 WIDGET_NAME="MARKET_OPENS_CLOSES_IN">
              <WIDGET>
                <OPENCLOSE EXCHANGEID="100"/>
              </WIDGET>
            </WIDGET_FRAME0>
            <WIDGET_FRAME1 WIDGET_NAME="ORDERS">
              <WIDGET VIEW="CHART"/>
            </WIDGET_FRAME1>
            <WIDGET_FRAME2 WIDGET_NAME="TIME_LEFT_UNTIL">
              <WIDGET>
                <TIMELEFTUNTIL EVENTID="0"/>
              </WIDGET>
            </WIDGET_FRAME2>
            <WIDGET_FRAME3 WIDGET_NAME="PL_OPEN">
              <WIDGET METRICS="PL_OPEN"/>
            </WIDGET_FRAME3>
            <WIDGET_FRAME4 WIDGET_NAME="WATCHLIST_HEAT_MAP">
              <WIDGET/>
            </WIDGET_FRAME4>
            <WIDGET_FRAME5/>
          </WIDGET_DASHBOARD>
        </HOMESCREEN>
        <INDIVIDUALS_COLUMN_MANAGER CUSTOM_OVERRIDES="" SYSTEM_OVERRIDES=""/>
        <ISE_SPREADS/>
        <MARKET_WATCH_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="QUOTES"/>
        <MEDIA_PLAYER AUTO_STREAM_SWITCH="true" MUTED="false" VOLUME="0.3333333333333333"/>
        <MERGEDALIKE_COLUMN_MANAGER CUSTOM_OVERRIDES="" SYSTEM_OVERRIDES=""/>
        <MONITOR ORDER_ENTRY_EXPANDED="false">
          <MONITOR_CONTENT>
            <EQUITIES_AND_EQUITY_OPTIONS1 EXPANDED="true"/>
            <FOREX2 EXPANDED="true"/>
            <GROUPING_POSITION_LIST>
              <EXPANDED/>
            </GROUPING_POSITION_LIST>
            <GROUPING_POS_STMT_SIZE_MODEL COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
              <MIDDLE_COLUMN_RATIOS>
                <ACCEPTOR_1857DF0CF0E65022107F2C4924E24F487BBF4C9F6CCA6A87AF11BC000EE07AE0 RATIOS="0.15730337078651685;0.16853932584269662;0.2247191011235955;0.2247191011235955;0.2247191011235955"/>
              </MIDDLE_COLUMN_RATIOS>
            </GROUPING_POS_STMT_SIZE_MODEL>
            <GROUPING_POS_STMT_SIZE_MODEL1 COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
              <MIDDLE_COLUMN_RATIOS>
                <ACCEPTOR_F17C396C36A6BB4F1C424CE6F38A2F09D711E4EE9875EFCFCD829E447C25E2B3 RATIOS="0.18918918918918917;0.27027027027027023;0.27027027027027023;0.27027027027027045"/>
              </MIDDLE_COLUMN_RATIOS>
            </GROUPING_POS_STMT_SIZE_MODEL1>
            <PERSONALIZED_NEWS EXPANDED="false" SORT_MODE="BY_RELEVANCE"/>
            <SYMBOL_SELECTOR SYMBOL_GROUP="-1"/>
            <TRADEACTIVITYPANEL>
              <CANCELLED_ORDERS EXPANDED="false"/>
              <FILLED_ORDERS EXPANDED="false"/>
              <SWITCH POSITION="0"/>
              <SWITCH1 POSITION="0"/>
              <SWITCH2 POSITION="0"/>
              <WORKING_ORDERS EXPANDED="false"/>
            </TRADEACTIVITYPANEL>
          </MONITOR_CONTENT>
        </MONITOR>
        <OPTION_HACKER/>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE">
            <ORDER_0 ORDER="BUY +100 SMH @245.45 LMT"/>
          </GROUP>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDERBOOK_STRATEGY_TABLE_SORTING/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <ORDER_EDITOR_TABLE/>
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
            <SAVED_ORDERS_TABLE/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SORTING/>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <PAIRS_TRADER/>
        <POSITION_GROUP_MANAGER SYSTEM_POSITION_GROUPS="None:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE,PERCENT_CHANGE,PL_PERCENT;Large-Cap:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Others:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Small-Cap:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Futures and Futures Options:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Forex:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Equities and Equity Options:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE,NET_LIQ,PERCENT_CHANGE,PL_PERCENT;Position:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Mid-Cap:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE;Micro-Cap:QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE"/>
        <PT_MESSAGE DISABLED="false"/>
        <QUOTES/>
        <ROLLING_STRATEGIES ORDER_ENTRY_EXPANDED="false">
          <CHART/>
          <ELIGIBLE_CCR_POSITION/>
          <ELIGIBLE_CCR_POSITION1/>
          <ELIGIBLE_CCR_POSITION2 EXPANDED="true"/>
          <ELIGIBLE_CCR_POSITION_INNER/>
          <ELIGIBLE_POSITIONS ELIGIBLE_POSITIONS="QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE"/>
          <GROUPING_POS_STMT_SIZE_MODEL COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
            <MIDDLE_COLUMN_RATIOS>
              <ACCEPTOR_4936ACC0D4848E1C2AABE3260C94427781322593BCC53CFDB912D6B121183878 RATIOS="0.15730337078651685;0.16853932584269662;0.2247191011235955;0.2247191011235955;0.2247191011235955"/>
            </MIDDLE_COLUMN_RATIOS>
          </GROUPING_POS_STMT_SIZE_MODEL>
          <ROLLING_STRATEGIES EXPANDED="true"/>
          <SWITCH POSITION="0"/>
        </ROLLING_STRATEGIES>
        <ROLLOVER/>
        <SCANNER/>
        <SCAN_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="Scanner"/>
        <SCREEN_SHOW RECORDING_VOLUME="0.333333"/>
        <SHARED_CONFIGS/>
        <SORTING/>
        <SORTING1/>
        <SORTING2/>
        <SORTING3/>
        <SORTING4/>
        <SOUNDS/>
        <SPREADS/>
        <SPREAD_HACKER/>
        <SYSTEM/>
        <THINK_BACK/>
        <THINK_SCRIPT_IDE/>
        <TOOLS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TRADER LOG"/>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/MES:XCME" SYMBOL_GROUP="1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=5685.97444628d,minValue=5565.83445793d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=1.3227513227513228d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=323,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2008-2024\n#\n\ndeclare real_size;\ndeclare on_volume;\ndeclare hide_on_intraday;\n\nplot Data = open_interest();&quot;,name=&quot;OpenInterest&quot;}))}}}}" SYMBOL="/MES:XCME" SYMBOL_GROUP="1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="10.0" GOOG="10.0" QQQ="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="1.0" GOOG="1.0" QQQ="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="-1.0" GOOG="-1.0" QQQ="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="2.0" GOOG="2.0" QQQ="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-2.0" GOOG="-2.0" QQQ="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="3.0" GOOG="3.0" QQQ="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-3.0" GOOG="-3.0" QQQ="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/MES:XCME" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=5695.12978519d,minValue=5511.09802302d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=1.9047619047619047d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=321,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;WEEK&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=127,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2008-2024\n#\n\ndeclare real_size;\ndeclare on_volume;\ndeclare hide_on_intraday;\n\nplot Data = open_interest();&quot;,name=&quot;OpenInterest&quot;}))}}}" SYMBOL="/MES:XCME" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL QQQ="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL QQQ="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=20120.59389844d,minValue=19449.39783961d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=1.3227513227513228d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=321,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2008-2024\n#\n\ndeclare real_size;\ndeclare on_volume;\ndeclare hide_on_intraday;\n\nplot Data = open_interest();&quot;,name=&quot;OpenInterest&quot;}))}}}}" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=20139.56777255d,minValue=19337.11059608d},shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=1.941747572815534d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings.shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;new&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=321,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2008-2024\n#\n\ndeclare real_size;\ndeclare on_volume;\ndeclare hide_on_intraday;\n\nplot Data = open_interest();&quot;,name=&quot;OpenInterest&quot;}))}}}}" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5009823182711198">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.49901768172888017">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
        <TRADE/>
        <TRADER_INTERFACE EXPANDED="true" GADGET_NAME="Account Info" LOCKED="false">
          <ACTIVE_ACCOUNT COMPONENTS="OPTION_BP,FX_BP,NET_LIQ,DTBP,DT_LEFT,CASH_AND_MONEY_MARKET_FUNDS,INTRADAY_LIQ_FUNDS,AVAILABLE_FUNDS_FOR_TRADING,FUTURES_VOLUME_MTD" ITEM_DISPLAY_MODE="HIDE_UNSED"/>
        </TRADER_INTERFACE>
        <TRADER_LOG/>
        <TRADE_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TRADE"/>
        <VIDEOS/>
        <VISUALIZE/>
        <VOICE_CHAT PLAYBACK_LAST_VOLUME_BEFORE_MUTED="1.0" PLAYBACK_VOLUME="1.0" RECORDING_LAST_VOLUME_BEFORE_MUTED="1.0" RECORDING_VOLUME="1.0"/>
        <VOLATILITY_ANALYSIS/>
      </DESKTOP>
      <DESKTOP_ROOT/>
      <DETACHED_FRAME_2 ALWAYS_ON_TOP="false" HEIGHT="1080" LAYOUT="CHARTS_GROUP" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1920" X="0" Y="0">
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE"/>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDERBOOK_STRATEGY_TABLE_SORTING/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <ORDER_EDITOR_TABLE/>
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
            <SAVED_ORDERS_TABLE/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SORTING COLUMN="TIME" ORDER="-1"/>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="QQQ" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=487.8543344d,minValue=471.56229058d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=4.878048780487805d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=324,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,@Boolean0),^(&quot;timePerProfile&quot;,&quot;HOUR&quot;)},inputsMap=@TreeMap0,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators.+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="QQQ" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="10.0" GOOG="10.0" META="10.0" QQQ="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="1.0" GOOG="1.0" META="1.0" QQQ="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="-1.0" GOOG="-1.0" META="-1.0" QQQ="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="2.0" GOOG="2.0" META="2.0" QQQ="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-2.0" GOOG="-2.0" META="-2.0" QQQ="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="3.0" GOOG="3.0" META="3.0" QQQ="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-3.0" GOOG="-3.0" META="-3.0" QQQ="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="QQQ" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=492.92699616d,minValue=442.52995779d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.0533880903490758d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings.shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;after hours&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=313,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=136,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="QQQ" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="10.0" SPY="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL QQQ="1.0" SPY="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL QQQ="-1.0" SPY="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="2.0" SPY="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="-2.0" SPY="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="3.0" SPY="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL QQQ="-3.0" SPY="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SPY" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=564.7884586d,minValue=553.39947487d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=4.878048780487805d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=322,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,@Boolean0),^(&quot;timePerProfile&quot;,&quot;HOUR&quot;)},inputsMap=@TreeMap0,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators.+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="SPY" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SPY" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=569.50365955d,minValue=525.84614319d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.0618556701030926d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings.shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;after hours&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=322,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=125,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="SPY" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5009803921568627">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.49901960784313726">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
      </DETACHED_FRAME_2>
      <DETACHED_FRAME_3 ALWAYS_ON_TOP="false" HEIGHT="1053" LAYOUT="CHARTS_GROUP" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1850" X="1990" Y="27">
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE"/>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDERBOOK_STRATEGY_TABLE_SORTING/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <ORDER_EDITOR_TABLE/>
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
            <SAVED_ORDERS_TABLE/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SORTING COLUMN="TIME" ORDER="-1"/>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="MSFT" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=429.19944118d,minValue=412.28236447d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.5d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=314,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,@Boolean0),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=121,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="MSFT" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL GOOG="10.0" MSFT="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL GOOG="1.0" MSFT="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL GOOG="-1.0" MSFT="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL GOOG="2.0" MSFT="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL GOOG="-2.0" MSFT="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL GOOG="3.0" MSFT="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL GOOG="-3.0" MSFT="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="AAPL" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=229.38508838d,minValue=222.02382012d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.5d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile vwap day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=312,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2023-2024\n#\n\ninput numDevDn = -2.0;\ninput numDevUp = 2.0;\n@Date\ninput beginDate = 20200101;\n\ndef yyyyMmDd = GetYYYYMMDD();\ndef isStart = (yyyyMmDd &gt;= beginDate and yyyyMmDd[1] &lt; beginDate) or (yyyyMmDd == First(yyyyMmDd) and yyyyMmDd &gt;= beginDate);\n\ndef volumeSum;\ndef volumeVwapSum;\ndef volumeVwap2Sum;\n\nif (isStart) {\n    volumeSum = volume;\n    volumeVwapSum = volume * vwap;\n    volumeVwap2Sum = volume * Sqr(vwap);\n} else {\n    volumeSum = CompoundValue(1, volumeSum[1] + volume, Double.NaN);\n    volumeVwapSum = CompoundValue(1, volumeVwapSum[1] + volume * vwap, Double.NaN);\n    volumeVwap2Sum = CompoundValue(1, volumeVwap2Sum[1] + volume * Sqr(vwap), Double.NaN);\n}\ndef price = volumeVwapSum / volumeSum;\ndef deviation = Sqrt(Max(volumeVwap2Sum / volumeSum - Sqr(price), 0));\n\nplot VWAP = price;\nplot UpperBand = price + numDevUp * deviation;\nplot LowerBand = price + numDevDn * deviation;\n\nVWAP.SetDefaultColor(GetColor(0));\nUpperBand.SetDefaultColor(GetColor(2));\nLowerBand.SetDefaultColor(GetColor(4));&quot;,name=&quot;AnchoredVWAP&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;WEEK&quot;)},inputsMap=@TreeMap0})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=123,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="AAPL" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" QQQ="10.0" TLSA="10.0" TSLA="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" QQQ="1.0" TLSA="1.0" TSLA="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" QQQ="-1.0" TLSA="-1.0" TSLA="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" QQQ="2.0" TLSA="2.0" TSLA="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" QQQ="-2.0" TLSA="-2.0" TSLA="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" QQQ="3.0" TLSA="3.0" TSLA="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" QQQ="-3.0" TLSA="-3.0" TSLA="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="NVDA" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=132.69680136d,minValue=119.40216221d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.5d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=313,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;showValueArea&quot;,@Boolean0),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2023-2024\n#\n\ninput numDevDn = -2.0;\ninput numDevUp = 2.0;\n@Date\ninput beginDate = 20200101;\n\ndef yyyyMmDd = GetYYYYMMDD();\ndef isStart = (yyyyMmDd &gt;= beginDate and yyyyMmDd[1] &lt; beginDate) or (yyyyMmDd == First(yyyyMmDd) and yyyyMmDd &gt;= beginDate);\n\ndef volumeSum;\ndef volumeVwapSum;\ndef volumeVwap2Sum;\n\nif (isStart) {\n    volumeSum = volume;\n    volumeVwapSum = volume * vwap;\n    volumeVwap2Sum = volume * Sqr(vwap);\n} else {\n    volumeSum = CompoundValue(1, volumeSum[1] + volume, Double.NaN);\n    volumeVwapSum = CompoundValue(1, volumeVwapSum[1] + volume * vwap, Double.NaN);\n    volumeVwap2Sum = CompoundValue(1, volumeVwap2Sum[1] + volume * Sqr(vwap), Double.NaN);\n}\ndef price = volumeVwapSum / volumeSum;\ndef deviation = Sqrt(Max(volumeVwap2Sum / volumeSum - Sqr(price), 0));\n\nplot VWAP = price;\nplot UpperBand = price + numDevUp * deviation;\nplot LowerBand = price + numDevDn * deviation;\n\nVWAP.SetDefaultColor(GetColor(0));\nUpperBand.SetDefaultColor(GetColor(2));\nLowerBand.SetDefaultColor(GetColor(4));&quot;,name=&quot;AnchoredVWAP&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=121,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="NVDA" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL NVDA="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL NVDA="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SMCI" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=648.75101471d,minValue=587.00251061d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=2.5d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=313,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# Charles Schwab &amp; Co. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=121,storableIndicators.+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# Charles Schwab &amp; Co. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}" SYMBOL="SMCI" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <OPTION_CHAIN VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <SORTING/>
            <SORTING1/>
            <SORTING2/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" SMCI="10.0" TSM="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" SMCI="1.0" TSM="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" SMCI="-1.0" TSM="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" SMCI="2.0" TSM="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" SMCI="-2.0" TSM="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" SMCI="3.0" TSM="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" SMCI="-3.0" TSM="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.500503524672709">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.499496475327291">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
      </DETACHED_FRAME_3>
      <LINES LEVEL="Beginner" RAPID="false"/>
      <MESSAGE_CENTER_LAYOUT>
        <SORTING COLUMN="TIME" ORDER="1"/>
      </MESSAGE_CENTER_LAYOUT>
      <MINESWEEPER BOMBS="10" COLUMNS="9" LEVEL="Beginner" QMARK="false" ROWS="9"/>
      <TETRIS LEVEL="Beginner" ROTATE="false"/>
    </DETACHED_FRAME_0>
  </WORKSPACE>
</PREFERENCES>
