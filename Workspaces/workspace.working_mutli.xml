<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<PREFERENCES VERSION="7">
  <WORKSPACE ACCOUNT_MODELS="ABRWVE1fU0VSSUFMSVpBVElPTl9WMAAAAAEAFFZBTV9TRVJJQUxJWkFUSU9OX1Yzf_C9wAAAAA9WaXJ0dWFsIEFjY291bnQAAAAAAAAAAAAAAAIAAAAAf_C9wQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH_wvcAAAAAAAAAAA1VTJAADVVMkAARDQVNIQPhqAAAAAAAAAAAAAAAAAAADRk5EAAVWQUxJRAAJRGVtbyBDYXNoAAAAAAAAAAAAAAROT05FAAAAAH_wvcIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB_8L3AAAAAAAAAAAZVU0QkRlgAA1VTRAAKRk9SRVhfQ0FTSED4agAAAAAAAAAAAAAAAAAAA0ZORAAFVkFMSUQAD0RlbW8gRm9yZXggQ2FzaAAAAAAAAAAAAAAETk9ORQ==" POSITION="1714138200000">
    <DETACHED_FRAME_0 ALWAYS_ON_TOP="false" HEIGHT="1080" LAYOUT="MAIN" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1920" X="0" Y="1080">
      <AUDIO URL=""/>
      <COM.DEVEXPERTS.TOS.UI.USER.ALERT.LASTSOUNDTAGKEY LAST_SOUNDTAG="Bell"/>
      <DESKTOP ALERTS_THINK_SCRIPT_EDITOR_HEIGHT="530" ALERTS_THINK_SCRIPT_EDITOR_WIDTH="850" ALERTS_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" ALERTS_THINK_SCRIPT_HELP_DIVIDER_LOCATION="176" ALERTS_THINK_SCRIPT_SIDE_PANEL_WIDTH="283" ALLOCATION_MODE="Single Account" CUSTOM_QUOTES_THINK_SCRIPT_EDITOR_HEIGHT="400" CUSTOM_QUOTES_THINK_SCRIPT_EDITOR_WIDTH="1000" CUSTOM_QUOTES_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" CUSTOM_QUOTES_THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" CUSTOM_QUOTES_THINK_SCRIPT_SIDE_PANEL_WIDTH="333" FILTERS_THINK_SCRIPT_EDITOR_HEIGHT="400" FILTERS_THINK_SCRIPT_EDITOR_WIDTH="1000" FILTERS_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" FILTERS_THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" FILTERS_THINK_SCRIPT_SIDE_PANEL_WIDTH="333" LAST_USED_LAYOUT="TOS CHARTS" MRU_SYMBOLS="AMD,/ES:XCME,TSL,TSLA,AAPL,PANW,QQQ,NFLX,PLTR,SMH,MU,SMCI,ARM,CMG,JPM,XLF,TSM,SPY,AMAT,COIN" ORDER_THINK_SCRIPT_EDITOR_HEIGHT="530" ORDER_THINK_SCRIPT_EDITOR_WIDTH="850" ORDER_THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" ORDER_THINK_SCRIPT_HELP_DIVIDER_LOCATION="176" ORDER_THINK_SCRIPT_SIDE_PANEL_WIDTH="283" PATTERN_EDITOR_DIVIDER="400" PATTERN_EDITOR_HEIGHT="800" PATTERN_EDITOR_WIDTH="1000" SAVE_ALLOCATION_MODE="false" THINK_SCRIPT_ALERT_AUTOCOMPLETE="true" THINK_SCRIPT_ALERT_POPUP_HELP="true" THINK_SCRIPT_EDITOR_FONT_FAMILY="Monospaced" THINK_SCRIPT_EDITOR_FONT_SIZE="16" THINK_SCRIPT_EDITOR_HEIGHT="400" THINK_SCRIPT_EDITOR_WIDTH="1000" THINK_SCRIPT_ERROR_PANEL_HEIGHT="65" THINK_SCRIPT_HELP_DIVIDER_LOCATION="133" THINK_SCRIPT_SIDE_PANEL="Reference" THINK_SCRIPT_SIDE_PANEL_WIDTH="333" UD_WARNING="true">
        <ACCOUNT_GROUP FOREX_REPORT_LAYOUT_CONFIG="{&#10;ORDER_ENTRY_EXPANDED=false&#10;}&#10;" ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="MONITOR">
          <FX_REPORT ORDER_ENTRY_EXPANDED="false"/>
        </ACCOUNT_GROUP>
        <ACTIVE_ACCOUNT_HEADLINE>
          <ACTIVE_ACCOUNT COMPONENTS="OPTION_BP,DTBP,CASH_AND_MONEY_MARKET_FUNDS" ITEM_DISPLAY_MODE="HIDE_UNSED"/>
        </ACTIVE_ACCOUNT_HEADLINE>
        <ALLOCATION QUANTITIES=""/>
        <ANALYZE_GROUP ORDER_ENTRY_EXPANDED="false" PALETTE="ff66ff,ffff,ff7e9c,b5b5b5,e7be00,ff5f5f,c531,797979,f9e9a7,ffffff,ff7e00,c0bfff,f6bcb3,74bde8,ea88ff,8fefbf" SELECTED_LAYOUT="THINK BACK" SYMBOL_GROUP="1">
          <DROPDOWN EXPANDED="true"/>
          <DROPDOWN1 EXPANDED="false"/>
          <FUTURES EXPANDED="true"/>
          <OPTIONS_CHART_PANEL DELTA_SUBGRAPH="false" HIGHLIGHT_TICKS="false" LOCK_TIME_AXIS="false" PALETTE="ff66ff,ffff,ff7e9c,b5b5b5,e7be00,ff5f5f,c531,797979,f9e9a7,ffffff,ff7e00,c0bfff,f6bcb3,74bde8,ea88ff,8fefbf" PERCENT_AXIS="false" PRODUCT_DEPTH_MODE="OPTIONS">
            <COMBO_CHECK_BOX COLORS="" SELECTION=""/>
            <FUTURES_CURVES CURVES_COUNT="1">
              <CURVE_0 COLOR="-65536" DATE="-1" IS_HIDDEN="false" PRICE_TYPE="mark" SYMBOL="/ES:XCME"/>
            </FUTURES_CURVES>
            <OPTIONS_CHART_CONTROLS STRIKE_COUNT="All" VALUE="IMPL_VOL" VALUE2="IMPL_VOL" VIEW="ALL"/>
          </OPTIONS_CHART_PANEL>
          <OPTIONS_STATISTIC EXPANDED="false"/>
          <OPTIONS_TIME_AND_SALES ALL_CONDITIONS="true" ALL_EXCHANGES="true" ALL_PRICE="true" ALL_QUANTITIES="true" ALL_SERIES="true" ALL_STRIKES="true" EXPANDED="false" SELECTED_CONDITIONS="" SELECTED_EXCHANGES="" SELECTED_SERIES="" SELECTED_SIDE="BOTH"/>
          <OPTION_CHAIN EXPANDED="true"/>
          <PRODUCT_DEPTH EXPANDED="false"/>
          <QSHEETPANEL QSHEET_CONFIGURATION_COLUMNS="LASTX,NET_CHANGE" STRIKE_QTY="4">
            <ALLPRODUCTSPANELSMODEL>
              <OPTION_CHAIN ORDERING="2" SWITCHED_ON="true"/>
              <OPTION_STATISTICS ORDERING="3" SWITCHED_ON="true"/>
              <OPTION_TIME_AND_SALES ORDERING="4" SWITCHED_ON="true"/>
              <TRADE_GRID ORDERING="1" SWITCHED_ON="true"/>
              <UNDERLYING ORDERING="0" SWITCHED_ON="true"/>
              <WIDGET_360 ORDERING="5" SWITCHED_ON="true"/>
            </ALLPRODUCTSPANELSMODEL>
            <OPTIONS_SELECT TEMPLATE_FILTER_NAME="Single">
              <FUTURES_FILTER_NAME ALL_DELIVERABLES="true" ALL_EXCHANGES="true" ALL_EXPIRATION_DAYS="true" ALL_EXPIRATION_TYPES="true" ALL_SIDES="true" ALL_STRIKES="true" SELECTED_DELIVERABLES="REGULAR" SELECTED_EXCHANGES="COMPOSITE" SELECTED_EXPIRATION_TYPES="REGULAR" SELECTED_SIDE="BOTH" THEO_ADJ_TYPE="DOLLAR" THEO_DATE="19863" THEO_VOL_ADJ="0.0">
                <THEO_ADJ_VALUES_NAME DOLLAR="0.0" PERCENT="0.0" SIGMA="0.0"/>
              </FUTURES_FILTER_NAME>
              <STOCK_FILTER_NAME ALL_DELIVERABLES="true" ALL_EXCHANGES="true" ALL_EXPIRATION_DAYS="true" ALL_EXPIRATION_TYPES="true" ALL_SIDES="true" ALL_STRIKES="true" SELECTED_DELIVERABLES="REGULAR" SELECTED_EXCHANGES="COMPOSITE" SELECTED_EXPIRATION_TYPES="REGULAR" SELECTED_SIDE="BOTH" THEO_ADJ_TYPE="DOLLAR" THEO_DATE="19863" THEO_VOL_ADJ="0.0">
                <THEO_ADJ_VALUES_NAME DOLLAR="0.0" PERCENT="0.0" SIGMA="0.0"/>
              </STOCK_FILTER_NAME>
            </OPTIONS_SELECT>
          </QSHEETPANEL>
          <SIMULATION_PANEL SLICE_EXPAND="false" TRADES_EXPANDED="">
            <BALANCES UNSELECTED=""/>
          </SIMULATION_PANEL>
          <SORTING71 COLUMN="EXPIRATION" ORDER="1"/>
          <TRADE_GRID COLUMN_COUNT="3" DEFAULT_TYPE="LEVEL_II" EXPANDED="false" ROW_COUNT="1">
            <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY"/>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY"/>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY"/>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY"/>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY"/>
                </_3>
              </TRADE>
            </CELL0>
            <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY"/>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY"/>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY"/>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY"/>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY"/>
                </_3>
              </TRADE>
            </CELL1>
            <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="LEVEL_II" SIDEBAR_IS_ACTIVE="true" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
              <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <CHART VERTICAL="false" VISIBLE="false" WEIGHT="3.0"/>
              <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <LEVEL_II SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0">
                <SORTING COLUMN="BID" ORDER="-1"/>
                <SORTING1 COLUMN="ASK" ORDER="1"/>
              </LEVEL_II>
              <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
              <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
              <TRADE CONFIGURATION_NAME="SINGLE" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
                <OCO_STOP>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY"/>
                </OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY"/>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY"/>
                <_2>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY"/>
                </_2>
                <_3>
                  <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY"/>
                  <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY"/>
                </_3>
              </TRADE>
            </CELL2>
            <MODELNODE0 COUNT="3" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.0">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
              <MODELNODE2 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.3333333333333333"/>
            </MODELNODE0>
          </TRADE_GRID>
          <UNDERLYING1 EXPANDED="true"/>
          <UNDERLYING_PANEL FUTURES_DISPLAYING_MODE="ACTIVE ONLY"/>
        </ANALYZE_GROUP>
        <CAPTIONS ENABLED="false"/>
        <CHARTING CHART_GROUP_MANAGER="@v10@%0:com.devexperts.toschart.facade.persistence,1:java.util,2:com.devexperts.toschart.model%#%0.ChartGroupManagerPersistence{encodedMyToolsModel=&quot;{\&quot;items\&quot;:[{\&quot;tool\&quot;:\&quot;TRENDLINE\&quot;,\&quot;name\&quot;:\&quot;\&quot;},{\&quot;tool\&quot;:\&quot;TEXT_NOTE\&quot;,\&quot;name\&quot;:\&quot;\&quot;},{\&quot;loadedName\&quot;:\&quot;SimpleMovingAvg\&quot;,\&quot;type\&quot;:\&quot;STUDY\&quot;,\&quot;name\&quot;:\&quot;SimpleMovingAvg\&quot;}],\&quot;toggledItemIndex\&quot;:-1,\&quot;mode\&quot;:\&quot;SINGLE_CHART\&quot;,\&quot;viewMode\&quot;:\&quot;OFF\&quot;}&quot;,generalProperties=#%1.HashMap{^(&quot;quickTimeFrames&quot;,&quot;[1d:m, 5d:5m, 5d:15m, 10d:30m, 20d:h, 180d:4h, 1y:d, 3y:w, 1d:3m, 1d:2m]&quot;),^(&quot;majorTimeZoneIds&quot;,#java.lang.String[10]{0=&quot;America/New_York&quot;,1=&quot;America/Chicago&quot;,2=&quot;America/Denver&quot;,3=&quot;America/Los_Angeles&quot;,4=&quot;Europe/London&quot;,5=&quot;Europe/Berlin&quot;,6=&quot;Europe/Moscow&quot;,7=&quot;Asia/Hong_Kong&quot;,8=&quot;Asia/Tokyo&quot;,9=&quot;Australia/Sydney&quot;}),^(&quot;timezone&quot;,&quot;America/Chicago&quot;)},groups=#%1.ArrayList{+(#%0.ChartGroupPersistence{groupId=&quot;isolated&quot;,properties=#%1.HashMap{^(&quot;hideStatusString&quot;,&lt;T),^(&quot;databoxPin&quot;,&lt;T),^(&quot;databoxMode&quot;,!java.lang.Enum.valueOf:DataBoxMode0(*%2.DataBoxMode.class,&quot;NONE&quot;))}}),+(#%0.ChartGroupPersistence{groupId=&quot;default&quot;,properties=#%1.HashMap{^(&quot;hideStatusString&quot;,&lt;T),^(&quot;databoxPin&quot;,&lt;T),^(&quot;databoxMode&quot;,@DataBoxMode0)}})}}" CORRECTIONS="" DISABLED_MESSAGES=""/>
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <COM.DEVEXPERTS.TOS.UI.USER.TFACE.GADGETSIDEBARSPLITPANE DIVIDER_LAST_LOCATION="0.0" DIVIDER_LOCATION="20.0"/>
        <CONFIG PRIVACY_MODE="false"/>
        <CONFIGURABLE_TAB SLIDER_PINNED="false"/>
        <EARNINGS_LAYOUT CURRENT_VIEW="FIT_ALL" ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1">
          <EARNING_SETTINGS>
            <COMPARE_MODE_MODEL_KEY>
              <CHART_SELECTION_KEY ITEMS=""/>
              <QUARTERS_SELECTION_KEY ITEMS=""/>
            </COMPARE_MODE_MODEL_KEY>
            <FIT_ALL_SETTINGS RELEASECOLOR="-1589760" WALL_STREETCOLOR="-16726735">
              <EST_SETTINGS_KEY ITEMS=""/>
              <EST_SRC_KEY ITEMS=""/>
              <VOL_OPT_KEY ITEMS=""/>
            </FIT_ALL_SETTINGS>
          </EARNING_SETTINGS>
        </EARNINGS_LAYOUT>
        <ERROR_REPORT AUTO_SEND_REPORT="true"/>
        <FRED FRED_CATALOGUE="{&quot;selectedLevel&quot;:&quot;first_level&quot;,&quot;columns&quot;:[]}" FRED_CHART="{&quot;subscriptionKey&quot;:{&quot;instrument&quot;:{&quot;symbol&quot;:&quot;&quot;,&quot;description&quot;:&quot;&quot;,&quot;frequencyType&quot;:&quot;DAILY&quot;,&quot;parentCategoryIds&quot;:[],&quot;fredUnits&quot;:&quot;&quot;,&quot;fredUnitsShort&quot;:&quot;&quot;,&quot;observationStartDate&quot;:0,&quot;observationEndDate&quot;:0,&quot;popularity&quot;:0,&quot;seasonalAdjustmentType&quot;:&quot;NOT_APPLICABLE&quot;},&quot;transformationParameters&quot;:{&quot;frequency&quot;:&quot;DEFAULT&quot;,&quot;aggregation&quot;:&quot;AVERAGE&quot;,&quot;unit&quot;:&quot;DEFAULT&quot;,&quot;indexDate&quot;:0},&quot;timeRange&quot;:{}},&quot;paintingSettings&quot;:{&quot;chartType&quot;:&quot;LINE&quot;,&quot;plotColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:1},&quot;backgroundColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:0},&quot;showGrid&quot;:true,&quot;shadeRecession&quot;:true,&quot;gridColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:2},&quot;crossType&quot;:&quot;FULL_CROSS&quot;,&quot;crossColor&quot;:{&quot;palette&quot;:&quot;fred&quot;,&quot;index&quot;:3}}}" FRED_STATE="CATEGORIES" ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1"/>
        <FUNDAMENTALS ORDER_ENTRY_EXPANDED="false" SYMBOL_GROUP="-1"/>
        <GADGETS>
          <SCRATCHPAD DOC="&lt;html id=&quot;scratchpad&quot;&gt;&lt;/html&gt;"/>
        </GADGETS>
        <GADGET_STACK_LAYOUT SCROLL_POSITION="0">
          <GADGET0 EXPANDED="true" GADGET_NAME="Account Info" LOCKED="true">
            <ACTIVE_ACCOUNT COMPONENTS="OPTION_BP,FX_BP,NET_LIQ,DTBP,DT_LEFT,UNSETTLED_CASH,CASH_AND_MONEY_MARKET_FUNDS,INTRADAY_LIQ_FUNDS,AVAILABLE_FUNDS_FOR_TRADING,FUTURES_VOLUME_MTD" ITEM_DISPLAY_MODE="HIDE_UNSED"/>
          </GADGET0>
          <GADGET1 EXPANDED="true" GADGET_NAME="Live News" HEIGHT="175" LOCKED="false">
            <LIVE_NEWS KEYWORD="" SYMBOL_FILTER_WATCHLIST="0" SYMBOL_GROUP="-1">
              <SORTING COLUMN="TIME" ORDER="-1"/>
            </LIVE_NEWS>
          </GADGET1>
          <GADGET2 EXPANDED="true" GADGET_NAME="Watchlist" HEIGHT="153" LOCKED="false">
            <WATCHLIST COLUMNS="SYMBOL:50:,LAST:46:,NET_CHANGE:51:,BID:43:,ASK:43:,&lt;arrow&gt;:11:F:F" COMPLEX_COLUMNS="" SYMBOL_GROUP="2" WATCH_LIST_ID="500199277"/>
          </GADGET2>
          <GADGET3 EXPANDED="true" GADGET_NAME="Quick Chart" HEIGHT="208" LOCKED="false">
            <QUICK_CHART_GADGET>
              <CHART CONFIGURATION="@v10@#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[],\\\&quot;allDivisions\\\&quot;:[]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[],\\\&quot;allDivisions\\\&quot;:[]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings.candleTrendTypeColors.!isFillDown:Boolean1,overlappedVolume=@Boolean1,showBubbles=@Boolean0,showExpFriday=@Boolean0},otherStyleSettings.showCorpActions=@Boolean0},subgraphModels.!get(#com.devexperts.toschart.control.subgraph.SubgraphId(&quot;Volume&quot;)){height=80}}" SYMBOL_GROUP="2"/>
            </QUICK_CHART_GADGET>
          </GADGET3>
        </GADGET_STACK_LAYOUT>
        <HELP_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="HELP"/>
        <INDIVIDUALS_COLUMN_MANAGER CUSTOM_OVERRIDES="" SYSTEM_OVERRIDES=""/>
        <MARKET_WATCH_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="QUOTES"/>
        <MEDIA_PLAYER AUTO_STREAM_SWITCH="true" MUTED="false" VOLUME="0.3333333333333333"/>
        <MERGEDALIKE_COLUMN_MANAGER CUSTOM_OVERRIDES="" SYSTEM_OVERRIDES=""/>
        <MONITOR ORDER_ENTRY_EXPANDED="false">
          <MONITOR_CONTENT>
            <EQUITIES_AND_EQUITY_OPTIONS1 EXPANDED="true"/>
            <FOREX2 EXPANDED="true"/>
            <GROUPING_POS_STMT_SIZE_MODEL COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
              <MIDDLE_COLUMN_RATIOS>
                <ACCEPTOR_1857DF0CF0E65022107F2C4924E24F487BBF4C9F6CCA6A87AF11BC000EE07AE0 RATIOS="0.15730337078651685;0.16853932584269662;0.2247191011235955;0.2247191011235955;0.2247191011235955"/>
              </MIDDLE_COLUMN_RATIOS>
            </GROUPING_POS_STMT_SIZE_MODEL>
            <GROUPING_POS_STMT_SIZE_MODEL1 COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
              <MIDDLE_COLUMN_RATIOS>
                <ACCEPTOR_F17C396C36A6BB4F1C424CE6F38A2F09D711E4EE9875EFCFCD829E447C25E2B3 RATIOS="0.18918918918918917;0.27027027027027023;0.27027027027027023;0.27027027027027045"/>
              </MIDDLE_COLUMN_RATIOS>
            </GROUPING_POS_STMT_SIZE_MODEL1>
            <PERSONALIZED_NEWS EXPANDED="false" SORT_MODE="BY_RELEVANCE"/>
            <SYMBOL_SELECTOR SYMBOL_GROUP="-1"/>
            <TRADEACTIVITYPANEL>
              <CANCELLED_ORDERS EXPANDED="false"/>
              <FILLED_ORDERS EXPANDED="false"/>
              <SWITCH POSITION="0"/>
              <SWITCH1 POSITION="0"/>
              <SWITCH2 POSITION="0"/>
              <WORKING_ORDERS EXPANDED="false"/>
            </TRADEACTIVITYPANEL>
          </MONITOR_CONTENT>
        </MONITOR>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE"/>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <PT_MESSAGE DISABLED="false"/>
        <ROLLING_STRATEGIES ORDER_ENTRY_EXPANDED="false">
          <ELIGIBLE_CCR_POSITION2 EXPANDED="true"/>
          <ELIGIBLE_POSITIONS ELIGIBLE_POSITIONS="QTY,DAYS,TRADE_PRICE,MARK_PRICE,MARK_CHANGE"/>
          <GROUPING_POS_STMT_SIZE_MODEL COMMON_COLUMN_RATIOS="0.3333333333333333;0.3333333333333333;0.3333333333333333" SECTION_RATIOS="0.15151515151515152;0.5252525252525253;0.32323232323232326">
            <MIDDLE_COLUMN_RATIOS>
              <ACCEPTOR_4936ACC0D4848E1C2AABE3260C94427781322593BCC53CFDB912D6B121183878 RATIOS="0.15730337078651685;0.16853932584269662;0.2247191011235955;0.2247191011235955;0.2247191011235955"/>
            </MIDDLE_COLUMN_RATIOS>
          </GROUPING_POS_STMT_SIZE_MODEL>
          <ROLLING_STRATEGIES EXPANDED="true"/>
          <SWITCH POSITION="0"/>
        </ROLLING_STRATEGIES>
        <SCAN_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="Scanner"/>
        <SCREEN_SHOW RECORDING_VOLUME="0.333333"/>
        <TOOLS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TRADER LOG"/>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/ES:XCME" SYMBOL_GROUP="1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),commonStyleSettings{colorSettings{candleTrendTypeColors.!isShowWicks:Boolean0,candleTypeColors.fillUp=@Boolean0,gridTypeColor=@CustomColor0,heikinAshiTypeColors.!isFillUp:Boolean1,monkeyProfileTypeColors.defaultRowHeight=@Boolean1,mpExpandedTypeColors.defaultRowHeight=@Boolean1,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=&lt;T,fitStudiesToScreen=&lt;F,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=&lt;T,manualAxisRegulator{maxValue=5338.21427282d,minValue=5315.29759764d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=9.433962264150944d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=&lt;T},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=317,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;input fvg_threshold = 1;\ninput bpr_threshold = 1;\ninput bars_since = 10;\ninput only_clean_bpr = no;\n\ndef new_fvg_bearish = if low[2] - high &gt; fvg_threshold then yes else no;\ndef new_fvg_bullish = if low - high[2] &gt; fvg_threshold then yes else no;\n\n\n# Bullish BPR\ndef new_bear = if new_fvg_bearish then 1 else new_bear[1] + 1;\ndef bullish_bear_fvg_high = if new_bear == 1 then low[2] else bullish_bear_fvg_high[1];\ndef bullish_bear_fvg_low = if new_bear == 1 then high else bullish_bear_fvg_low[1];\n\ndef bull_cond_1 = new_fvg_bullish and new_fvg_bearish within bars_since bars;\n\ndef bull_fvg_high = if bull_cond_1 then low else bull_fvg_high[1];\ndef bull_fvg_low = if bull_cond_1 then high[2] else bull_fvg_low[1];\n\ndef bull_cond_2 = if bull_cond_1 then if bullish_bear_fvg_low + bullish_bear_fvg_high + bull_fvg_low + bull_fvg_high &gt; Max(bullish_bear_fvg_low, bull_fvg_low) - Min(bullish_bear_fvg_high, bull_fvg_high) then yes else no else no;\n\ndef bull_combined_low = if bull_cond_1 and bull_cond_2 then Max(bullish_bear_fvg_low, bull_fvg_low) else bull_combined_low[1];\ndef bull_combined_high = if bull_cond_1 and bull_cond_2 then Min(bullish_bear_fvg_high, bull_fvg_high) else bull_combined_high[1];\n\ndef bull_cond_3 = if only_clean_bpr then fold i = 2 to bars_since with j = yes do if i &lt; new_bear and high[i] &gt; bull_combined_low then j and no else j and yes else yes;\n\ndef bull_result = if bull_cond_1 and bull_cond_2 and (bull_combined_high - bull_combined_low &gt; bpr_threshold) then yes else if low &lt; bull_combined_low then double.nan else bull_result[1];\n\ndef bull_result_high = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_high else bull_result_high[1];\ndef bull_result_low = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_low else bull_result_low[1];\n\n\n# Bearish BPR\ndef new_bull = if new_fvg_bullish then 1 else new_bull[1] + 1;\ndef bearish_bull_fvg_high = if new_bull == 1 then low else bearish_bull_fvg_high[1];\ndef bearish_bull_fvg_low = if new_bull == 1 then high[2] else bearish_bull_fvg_low[1];\n\ndef bear_cond_1 = new_fvg_bearish and new_fvg_bullish within bars_since bars;\n\ndef bear_fvg_high = if bear_cond_1 then low[2] else bear_fvg_high[1];\ndef bear_fvg_low = if bear_cond_1 then high else bear_fvg_low[1];\n\ndef bear_cond_2 = if bear_cond_1 then if bearish_bull_fvg_low + bearish_bull_fvg_high + bear_fvg_low + bear_fvg_high &gt; Max(bearish_bull_fvg_low, bear_fvg_low) - Min(bearish_bull_fvg_high, bear_fvg_high) then yes else no else no;\n\ndef bear_combined_low = if bear_cond_1 and bear_cond_2 then Max(bearish_bull_fvg_low, bear_fvg_low) else bear_combined_low[1];\ndef bear_combined_high = if bear_cond_1 and bear_cond_2 then Min(bearish_bull_fvg_high, bear_fvg_high) else bear_combined_high[1];\n\ndef bear_cond_3 = if only_clean_bpr then fold k = 2 to bars_since with p = yes do if k &lt; new_bull and low[k] &lt; bear_combined_high then p and no else p and yes else yes;\n\ndef bear_result = if bear_cond_1 and bear_cond_2 and bear_cond_3 and (bear_combined_high - bear_combined_low &gt; bpr_threshold) then yes else if high &gt; bear_combined_high then double.nan else bear_result[1];\n\ndef bear_result_high = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_high else bear_result_high[1];\ndef bear_result_low = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_low else bear_result_low[1];\n\n\n# Plotting\ndef bull_signal = if bull_result then yes else no;\ndef bh = if bull_result then bull_result_high else bh[1];\ndef bh1 = bh;\ndef bl = if bull_result then bull_result_low else bl[1];\ndef bl1 = bl;\n\ndef bear_signal = if bear_result then yes else no;\ndef ph = if bear_result then bear_result_high else ph[1];\ndef ph1 = ph;\ndef pl = if bear_result then bear_result_low else pl[1];\ndef pl1 = pl;\n\nDefineGlobalColor(\&quot;Bullish\&quot;, Color.GREEN);\nDefineGlobalColor(\&quot;Bearish\&quot;, Color.RED);\nAddCloud(if bull_signal then bh1 else Double.NaN, if bull_signal then bl1 else Double.NaN,  GlobalColor(\&quot;Bullish\&quot;));\nAddCloud(if bear_signal then ph1 else Double.NaN, if bear_signal then pl1 else Double.NaN,  GlobalColor(\&quot;Bearish\&quot;));&quot;,name=&quot;_6eb19cce_cb9c_4a91_bda7_58f957108e00&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# Previous Day High/Low/Close + Premarket High/Low + High/Low/Open of Day + ATR Lines\n# Created by Wiinii\n# V1.6\n# Some code based on code by Mobius (premarket) and TraderKevin (ATR lines\n# https://usethinkscript.com/threads/previous-day-high-low-close-premarket-high-low-high-low-open-of-day-for-thinkorswim.13139/\n\ndeclare hide_on_daily;\n\ninput length = 1;\ninput showOnlyLastPeriod = yes;\ninput ShowBubbles = yes;\ninput locate_bubbles_at = {default Expansion, Time};\ninput locate_bubbles_at_time = 800;\ninput BarsFromExpansion = 1;\ninput ShowPricesInBubbles = yes;\n\ndef bn = BarNumber();\ndef na = Double.NaN;\ndef h  = high;\ndef l  = low;\ndef o = open;\ndef c = close;\ndef v = volume;\ndef aggregationPeriod = AggregationPeriod.DAY;\ndef displace = -1;\ndef timeopen = SecondsFromTime(locate_bubbles_at_time) == 0;\ndef isExpansion = locate_bubbles_at == locate_bubbles_at.Expansion and IsNaN(close);\ndef firstExpansionBar = if !IsNaN(close[-1]) and isExpansion then 1 else if isExpansion then firstExpansionBar[1] + 1 else 0;\ndef BubbleLocation = if locate_bubbles_at == locate_bubbles_at.Time then timeopen else isExpansion and firstExpansionBar == BarsFromExpansion;\n\n#----- Previous Day High/Low/Close -----#\n\n\nplot PD_High;\nplot PD_Low;\nplot PD_Close;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PD_High = na;\n    PD_Low = na;\n    PD_Close = na;\n} else {\n    PD_High = Highest(high(period = aggregationPeriod)[-displace], length);\n    PD_Low = Lowest(low(period = aggregationPeriod)[-displace], length);\n    PD_Close = close(period = aggregationPeriod)[-displace];\n}\n\nPD_High.SetDefaultColor(Color.DARK_ORANGE);\nPD_High.SetStyle(Curve.LONG_DASH);\nPD_High.SetLineWeight(2);\nPD_High.HideTitle();\n\nPD_Low.SetDefaultColor(Color.DARK_ORANGE);\nPD_Low.SetStyle(Curve.LONG_DASH);\nPD_Low.SetLineWeight(2);\nPD_Low.HideTitle();\n\nPD_Close.SetDefaultColor(Color.WHITE);\nPD_Close.SetStyle(Curve.LONG_DASH);\nPD_Close.SetLineWeight(2);\nPD_Close.HideTitle();\n\nDefineGlobalColor(\&quot;PD_High\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_High, \&quot;PDH: \&quot; + (if ShowPricesInBubbles then AsText(PD_High) else \&quot;\&quot;), GlobalColor(\&quot;PD_High\&quot;));\n\nDefineGlobalColor(\&quot;PD_Low\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Low, \&quot;PDL: \&quot; + (if ShowPricesInBubbles then AsText(PD_Low) else \&quot;\&quot;), GlobalColor(\&quot;PD_Low\&quot;), no);\n\nDefineGlobalColor(\&quot;PD_Close\&quot;, Color.WHITE);\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Close, \&quot;PDC: \&quot; + (if ShowPricesInBubbles then AsText(PD_Close) else \&quot;\&quot;), GlobalColor(\&quot;PD_Close\&quot;));\n\nPD_High.HideBubble();\nPD_Low.HideBubble();\nPD_Close.HideBubble();\n\n\n#----- Premarket High/Low -----# Thanks to Mobius\n\ndef GlobeX = GetTime() &lt; RegularTradingStart(GetYYYYMMDD());\n\ndef vol = if GlobeX and !GlobeX[1]\nthen v\nelse if GlobeX\nthen vol[1] + v\nelse na;\n\ndef GlobeX_Volume = vol;\n\ndef ONhigh = if GlobeX and !GlobeX[1]\nthen h\nelse if GlobeX and\nh &gt; ONhigh[1]\nthen h\nelse ONhigh[1];\n\ndef ONhighBar = if GlobeX and h == ONhigh\nthen bn\nelse na;\n\ndef ONlow = if GlobeX and !GlobeX[1]\nthen l\nelse if GlobeX and\nl &lt; ONlow[1]\nthen l\nelse ONlow[1];\n\ndef ONlowBar = if GlobeX and l == ONlow\nthen bn\nelse na;\n\ndef OverNightHigh = if BarNumber() == HighestAll(ONhighBar)\nthen ONhigh\nelse OverNightHigh[1];\n\ndef OverNightLow = if BarNumber() == HighestAll(ONlowBar)\nthen ONlow\nelse OverNightLow[1];\n\nplot PM_High;\nplot PM_Low;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PM_High = na;\n    PM_Low = na;\n} else {\n    PM_High = if OverNightHigh &gt; 0 then OverNightHigh else na;\n    PM_Low = if OverNightLow &gt; 0 then OverNightLow else na;\n}\n\n#PM_High.SetHiding(!PlotOverNightExtremes);\nPM_High.SetLineWeight(2);\nPM_High.SetDefaultColor(Color.CYAN);\nPM_High.SetStyle(Curve.LONG_DASH);\nPM_High.HideBubble();\nPM_High.HideTitle();\n\n#PM_Low.SetHiding(!PlotOverNightExtremes);\nPM_Low.SetStyle(Curve.LONG_DASH);\nPM_Low.SetDefaultColor(Color.CYAN);\nPM_Low.HideBubble();\nPM_Low.HideTitle();\n\nDefineGlobalColor(\&quot;PM_High\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONhighBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_High, \&quot;PMH: \&quot; + (if ShowPricesInBubbles then AsText(PM_High) else \&quot;\&quot;), GlobalColor(\&quot;PM_High\&quot;));\n\nDefineGlobalColor(\&quot;PM_Low\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONlowBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_Low, \&quot;PML: \&quot; + (if ShowPricesInBubbles then AsText(PM_Low) else \&quot;\&quot;), GlobalColor(\&quot;PM_Low\&quot;), no);  \n\n\n#----- Today Open/High/Low -----#\n\n\nplot High_of_Day;\nplot Low_of_Day;\nplot DayOpen;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    DayOpen = na;\n    High_of_Day = na;\n    Low_of_Day = na;\n} else {\n    DayOpen = open(period = aggregationPeriod)[0];\n    High_of_Day = Highest(high(period = aggregationPeriod), length);\n    Low_of_Day = Lowest(low(period = aggregationPeriod), length);\n}\n\nDayOpen.SetDefaultColor (Color.GRAY);\nDayOpen.SetPaintingStrategy(PaintingStrategy.DASHES);\nDayOpen.SetLineWeight(2);\nDayOpen.HideTitle();\n\nHigh_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nHigh_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nHigh_of_Day.SetLineWeight(2);\nHigh_of_Day.HideTitle();\n\nLow_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nLow_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nLow_of_Day.SetLineWeight(2);\nLow_of_Day.HideTitle();\n\nDefineGlobalColor(\&quot;Open\&quot;, Color.LIGHT_GRAY);\nAddChartBubble(ShowBubbles and BubbleLocation, DayOpen, \&quot;Open: \&quot; + (if ShowPricesInBubbles then AsText(DayOpen) else \&quot;\&quot;), GlobalColor(\&quot;Open\&quot;));\n\nDefineGlobalColor(\&quot;High_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, High_of_Day, \&quot;HOD: \&quot; + (if ShowPricesInBubbles then AsText(High_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;High_of_Day\&quot;));\n\nDefineGlobalColor(\&quot;Low_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, Low_of_Day, \&quot;LOD: \&quot; + (if ShowPricesInBubbles then AsText(Low_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;Low_of_Day\&quot;), no);\n\n#----- ATR Lines -----# Thaanks to TraderKevin\ninput showAtrLines = Yes;\ninput atrLinesFrom = {default pdc, dayOpen};\ninput ATRlength = 14;\ninput averageType = AverageType.WILDERS;\n\ndef ATR = MovingAverage(averageType, TrueRange(high(period = ”DAY”)[1], close(period = ”DAY”)[1], low(period = ”DAY”)[1]), ATRlength);\n\nplot hatr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen + ATR else PD_Close + ATR;\nplot latr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen - ATR else PD_Close - ATR;\n\nhatr.SetLineWeight(5);\nhatr.SetDefaultColor(Color.RED);\nhatr.SetStyle(Curve.LONG_DASH);\nhatr.HideBubble();\nhatr.HideTitle();\nhatr.SetHiding(showAtrLines == no);\n\nlatr.SetLineWeight(5);\nlatr.SetStyle(Curve.LONG_DASH);\nlatr.SetDefaultColor(Color.GREEN);\nlatr.HideBubble();\nlatr.HideTitle();\nlatr.SetHiding(showAtrLines == no);\n\nDefineGlobalColor(\&quot;hatr\&quot;, Color.PINK);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, hatr, \&quot;ATRH: \&quot; + (if ShowPricesInBubbles then AsText(hatr) else \&quot;\&quot;), GlobalColor(\&quot;hatr\&quot;));\n\nDefineGlobalColor(\&quot;latr\&quot;, Color.LIGHT_GREEN);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, latr, \&quot;ATRL: \&quot; + (if ShowPricesInBubbles then AsText(latr) else \&quot;\&quot;), GlobalColor(\&quot;latr\&quot;), no);&quot;,name=&quot;_678235d3_e927_435d_b36b_2e7ac1718c29&quot;}){inputsMap:TreeMap0{^(&quot;ShowBubbles&quot;,&lt;F)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean0,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean0,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap1{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,&lt;F),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap1,plots{3:{hiding=@Boolean0},4:{hiding=@Boolean0}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean0,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=123,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="/ES:XCME" SYMBOL_GROUP="1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="10.0" GOOG="10.0" QQQ="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="1.0" GOOG="1.0" QQQ="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="-1.0" GOOG="-1.0" QQQ="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="2.0" GOOG="2.0" QQQ="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-2.0" GOOG="-2.0" QQQ="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="3.0" GOOG="3.0" QQQ="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-3.0" GOOG="-3.0" QQQ="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="COIN" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},commonStyleSettings{colorSettings{candleTrendTypeColors.!isShowWicks:Boolean0,candleTypeColors.fillUp=@Boolean0,gridTypeColor=@CustomColor0,heikinAshiTypeColors.!isFillUp:Boolean1,monkeyProfileTypeColors.defaultRowHeight=@Boolean1,mpExpandedTypeColors.defaultRowHeight=@Boolean1,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=&lt;T,fitStudiesToScreen=&lt;F,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=&lt;T,manualAxisRegulator{maxValue=240.87867728d,minValue=219.66672766d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=5.347593582887701d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=&lt;T},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=317,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;input fvg_threshold = 1;\ninput bpr_threshold = 1;\ninput bars_since = 10;\ninput only_clean_bpr = no;\n\ndef new_fvg_bearish = if low[2] - high &gt; fvg_threshold then yes else no;\ndef new_fvg_bullish = if low - high[2] &gt; fvg_threshold then yes else no;\n\n\n# Bullish BPR\ndef new_bear = if new_fvg_bearish then 1 else new_bear[1] + 1;\ndef bullish_bear_fvg_high = if new_bear == 1 then low[2] else bullish_bear_fvg_high[1];\ndef bullish_bear_fvg_low = if new_bear == 1 then high else bullish_bear_fvg_low[1];\n\ndef bull_cond_1 = new_fvg_bullish and new_fvg_bearish within bars_since bars;\n\ndef bull_fvg_high = if bull_cond_1 then low else bull_fvg_high[1];\ndef bull_fvg_low = if bull_cond_1 then high[2] else bull_fvg_low[1];\n\ndef bull_cond_2 = if bull_cond_1 then if bullish_bear_fvg_low + bullish_bear_fvg_high + bull_fvg_low + bull_fvg_high &gt; Max(bullish_bear_fvg_low, bull_fvg_low) - Min(bullish_bear_fvg_high, bull_fvg_high) then yes else no else no;\n\ndef bull_combined_low = if bull_cond_1 and bull_cond_2 then Max(bullish_bear_fvg_low, bull_fvg_low) else bull_combined_low[1];\ndef bull_combined_high = if bull_cond_1 and bull_cond_2 then Min(bullish_bear_fvg_high, bull_fvg_high) else bull_combined_high[1];\n\ndef bull_cond_3 = if only_clean_bpr then fold i = 2 to bars_since with j = yes do if i &lt; new_bear and high[i] &gt; bull_combined_low then j and no else j and yes else yes;\n\ndef bull_result = if bull_cond_1 and bull_cond_2 and (bull_combined_high - bull_combined_low &gt; bpr_threshold) then yes else if low &lt; bull_combined_low then double.nan else bull_result[1];\n\ndef bull_result_high = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_high else bull_result_high[1];\ndef bull_result_low = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_low else bull_result_low[1];\n\n\n# Bearish BPR\ndef new_bull = if new_fvg_bullish then 1 else new_bull[1] + 1;\ndef bearish_bull_fvg_high = if new_bull == 1 then low else bearish_bull_fvg_high[1];\ndef bearish_bull_fvg_low = if new_bull == 1 then high[2] else bearish_bull_fvg_low[1];\n\ndef bear_cond_1 = new_fvg_bearish and new_fvg_bullish within bars_since bars;\n\ndef bear_fvg_high = if bear_cond_1 then low[2] else bear_fvg_high[1];\ndef bear_fvg_low = if bear_cond_1 then high else bear_fvg_low[1];\n\ndef bear_cond_2 = if bear_cond_1 then if bearish_bull_fvg_low + bearish_bull_fvg_high + bear_fvg_low + bear_fvg_high &gt; Max(bearish_bull_fvg_low, bear_fvg_low) - Min(bearish_bull_fvg_high, bear_fvg_high) then yes else no else no;\n\ndef bear_combined_low = if bear_cond_1 and bear_cond_2 then Max(bearish_bull_fvg_low, bear_fvg_low) else bear_combined_low[1];\ndef bear_combined_high = if bear_cond_1 and bear_cond_2 then Min(bearish_bull_fvg_high, bear_fvg_high) else bear_combined_high[1];\n\ndef bear_cond_3 = if only_clean_bpr then fold k = 2 to bars_since with p = yes do if k &lt; new_bull and low[k] &lt; bear_combined_high then p and no else p and yes else yes;\n\ndef bear_result = if bear_cond_1 and bear_cond_2 and bear_cond_3 and (bear_combined_high - bear_combined_low &gt; bpr_threshold) then yes else if high &gt; bear_combined_high then double.nan else bear_result[1];\n\ndef bear_result_high = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_high else bear_result_high[1];\ndef bear_result_low = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_low else bear_result_low[1];\n\n\n# Plotting\ndef bull_signal = if bull_result then yes else no;\ndef bh = if bull_result then bull_result_high else bh[1];\ndef bh1 = bh;\ndef bl = if bull_result then bull_result_low else bl[1];\ndef bl1 = bl;\n\ndef bear_signal = if bear_result then yes else no;\ndef ph = if bear_result then bear_result_high else ph[1];\ndef ph1 = ph;\ndef pl = if bear_result then bear_result_low else pl[1];\ndef pl1 = pl;\n\nDefineGlobalColor(\&quot;Bullish\&quot;, Color.GREEN);\nDefineGlobalColor(\&quot;Bearish\&quot;, Color.RED);\nAddCloud(if bull_signal then bh1 else Double.NaN, if bull_signal then bl1 else Double.NaN,  GlobalColor(\&quot;Bullish\&quot;));\nAddCloud(if bear_signal then ph1 else Double.NaN, if bear_signal then pl1 else Double.NaN,  GlobalColor(\&quot;Bearish\&quot;));&quot;,name=&quot;_6eb19cce_cb9c_4a91_bda7_58f957108e00&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# Previous Day High/Low/Close + Premarket High/Low + High/Low/Open of Day + ATR Lines\n# Created by Wiinii\n# V1.6\n# Some code based on code by Mobius (premarket) and TraderKevin (ATR lines\n# https://usethinkscript.com/threads/previous-day-high-low-close-premarket-high-low-high-low-open-of-day-for-thinkorswim.13139/\n\ndeclare hide_on_daily;\n\ninput length = 1;\ninput showOnlyLastPeriod = yes;\ninput ShowBubbles = yes;\ninput locate_bubbles_at = {default Expansion, Time};\ninput locate_bubbles_at_time = 800;\ninput BarsFromExpansion = 1;\ninput ShowPricesInBubbles = yes;\n\ndef bn = BarNumber();\ndef na = Double.NaN;\ndef h  = high;\ndef l  = low;\ndef o = open;\ndef c = close;\ndef v = volume;\ndef aggregationPeriod = AggregationPeriod.DAY;\ndef displace = -1;\ndef timeopen = SecondsFromTime(locate_bubbles_at_time) == 0;\ndef isExpansion = locate_bubbles_at == locate_bubbles_at.Expansion and IsNaN(close);\ndef firstExpansionBar = if !IsNaN(close[-1]) and isExpansion then 1 else if isExpansion then firstExpansionBar[1] + 1 else 0;\ndef BubbleLocation = if locate_bubbles_at == locate_bubbles_at.Time then timeopen else isExpansion and firstExpansionBar == BarsFromExpansion;\n\n#----- Previous Day High/Low/Close -----#\n\n\nplot PD_High;\nplot PD_Low;\nplot PD_Close;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PD_High = na;\n    PD_Low = na;\n    PD_Close = na;\n} else {\n    PD_High = Highest(high(period = aggregationPeriod)[-displace], length);\n    PD_Low = Lowest(low(period = aggregationPeriod)[-displace], length);\n    PD_Close = close(period = aggregationPeriod)[-displace];\n}\n\nPD_High.SetDefaultColor(Color.DARK_ORANGE);\nPD_High.SetStyle(Curve.LONG_DASH);\nPD_High.SetLineWeight(2);\nPD_High.HideTitle();\n\nPD_Low.SetDefaultColor(Color.DARK_ORANGE);\nPD_Low.SetStyle(Curve.LONG_DASH);\nPD_Low.SetLineWeight(2);\nPD_Low.HideTitle();\n\nPD_Close.SetDefaultColor(Color.WHITE);\nPD_Close.SetStyle(Curve.LONG_DASH);\nPD_Close.SetLineWeight(2);\nPD_Close.HideTitle();\n\nDefineGlobalColor(\&quot;PD_High\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_High, \&quot;PDH: \&quot; + (if ShowPricesInBubbles then AsText(PD_High) else \&quot;\&quot;), GlobalColor(\&quot;PD_High\&quot;));\n\nDefineGlobalColor(\&quot;PD_Low\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Low, \&quot;PDL: \&quot; + (if ShowPricesInBubbles then AsText(PD_Low) else \&quot;\&quot;), GlobalColor(\&quot;PD_Low\&quot;), no);\n\nDefineGlobalColor(\&quot;PD_Close\&quot;, Color.WHITE);\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Close, \&quot;PDC: \&quot; + (if ShowPricesInBubbles then AsText(PD_Close) else \&quot;\&quot;), GlobalColor(\&quot;PD_Close\&quot;));\n\nPD_High.HideBubble();\nPD_Low.HideBubble();\nPD_Close.HideBubble();\n\n\n#----- Premarket High/Low -----# Thanks to Mobius\n\ndef GlobeX = GetTime() &lt; RegularTradingStart(GetYYYYMMDD());\n\ndef vol = if GlobeX and !GlobeX[1]\nthen v\nelse if GlobeX\nthen vol[1] + v\nelse na;\n\ndef GlobeX_Volume = vol;\n\ndef ONhigh = if GlobeX and !GlobeX[1]\nthen h\nelse if GlobeX and\nh &gt; ONhigh[1]\nthen h\nelse ONhigh[1];\n\ndef ONhighBar = if GlobeX and h == ONhigh\nthen bn\nelse na;\n\ndef ONlow = if GlobeX and !GlobeX[1]\nthen l\nelse if GlobeX and\nl &lt; ONlow[1]\nthen l\nelse ONlow[1];\n\ndef ONlowBar = if GlobeX and l == ONlow\nthen bn\nelse na;\n\ndef OverNightHigh = if BarNumber() == HighestAll(ONhighBar)\nthen ONhigh\nelse OverNightHigh[1];\n\ndef OverNightLow = if BarNumber() == HighestAll(ONlowBar)\nthen ONlow\nelse OverNightLow[1];\n\nplot PM_High;\nplot PM_Low;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PM_High = na;\n    PM_Low = na;\n} else {\n    PM_High = if OverNightHigh &gt; 0 then OverNightHigh else na;\n    PM_Low = if OverNightLow &gt; 0 then OverNightLow else na;\n}\n\n#PM_High.SetHiding(!PlotOverNightExtremes);\nPM_High.SetLineWeight(2);\nPM_High.SetDefaultColor(Color.CYAN);\nPM_High.SetStyle(Curve.LONG_DASH);\nPM_High.HideBubble();\nPM_High.HideTitle();\n\n#PM_Low.SetHiding(!PlotOverNightExtremes);\nPM_Low.SetStyle(Curve.LONG_DASH);\nPM_Low.SetDefaultColor(Color.CYAN);\nPM_Low.HideBubble();\nPM_Low.HideTitle();\n\nDefineGlobalColor(\&quot;PM_High\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONhighBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_High, \&quot;PMH: \&quot; + (if ShowPricesInBubbles then AsText(PM_High) else \&quot;\&quot;), GlobalColor(\&quot;PM_High\&quot;));\n\nDefineGlobalColor(\&quot;PM_Low\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONlowBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_Low, \&quot;PML: \&quot; + (if ShowPricesInBubbles then AsText(PM_Low) else \&quot;\&quot;), GlobalColor(\&quot;PM_Low\&quot;), no);  \n\n\n#----- Today Open/High/Low -----#\n\n\nplot High_of_Day;\nplot Low_of_Day;\nplot DayOpen;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    DayOpen = na;\n    High_of_Day = na;\n    Low_of_Day = na;\n} else {\n    DayOpen = open(period = aggregationPeriod)[0];\n    High_of_Day = Highest(high(period = aggregationPeriod), length);\n    Low_of_Day = Lowest(low(period = aggregationPeriod), length);\n}\n\nDayOpen.SetDefaultColor (Color.GRAY);\nDayOpen.SetPaintingStrategy(PaintingStrategy.DASHES);\nDayOpen.SetLineWeight(2);\nDayOpen.HideTitle();\n\nHigh_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nHigh_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nHigh_of_Day.SetLineWeight(2);\nHigh_of_Day.HideTitle();\n\nLow_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nLow_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nLow_of_Day.SetLineWeight(2);\nLow_of_Day.HideTitle();\n\nDefineGlobalColor(\&quot;Open\&quot;, Color.LIGHT_GRAY);\nAddChartBubble(ShowBubbles and BubbleLocation, DayOpen, \&quot;Open: \&quot; + (if ShowPricesInBubbles then AsText(DayOpen) else \&quot;\&quot;), GlobalColor(\&quot;Open\&quot;));\n\nDefineGlobalColor(\&quot;High_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, High_of_Day, \&quot;HOD: \&quot; + (if ShowPricesInBubbles then AsText(High_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;High_of_Day\&quot;));\n\nDefineGlobalColor(\&quot;Low_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, Low_of_Day, \&quot;LOD: \&quot; + (if ShowPricesInBubbles then AsText(Low_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;Low_of_Day\&quot;), no);\n\n#----- ATR Lines -----# Thaanks to TraderKevin\ninput showAtrLines = Yes;\ninput atrLinesFrom = {default pdc, dayOpen};\ninput ATRlength = 14;\ninput averageType = AverageType.WILDERS;\n\ndef ATR = MovingAverage(averageType, TrueRange(high(period = ”DAY”)[1], close(period = ”DAY”)[1], low(period = ”DAY”)[1]), ATRlength);\n\nplot hatr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen + ATR else PD_Close + ATR;\nplot latr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen - ATR else PD_Close - ATR;\n\nhatr.SetLineWeight(5);\nhatr.SetDefaultColor(Color.RED);\nhatr.SetStyle(Curve.LONG_DASH);\nhatr.HideBubble();\nhatr.HideTitle();\nhatr.SetHiding(showAtrLines == no);\n\nlatr.SetLineWeight(5);\nlatr.SetStyle(Curve.LONG_DASH);\nlatr.SetDefaultColor(Color.GREEN);\nlatr.HideBubble();\nlatr.HideTitle();\nlatr.SetHiding(showAtrLines == no);\n\nDefineGlobalColor(\&quot;hatr\&quot;, Color.PINK);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, hatr, \&quot;ATRH: \&quot; + (if ShowPricesInBubbles then AsText(hatr) else \&quot;\&quot;), GlobalColor(\&quot;hatr\&quot;));\n\nDefineGlobalColor(\&quot;latr\&quot;, Color.LIGHT_GREEN);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, latr, \&quot;ATRL: \&quot; + (if ShowPricesInBubbles then AsText(latr) else \&quot;\&quot;), GlobalColor(\&quot;latr\&quot;), no);&quot;,name=&quot;_678235d3_e927_435d_b36b_2e7ac1718c29&quot;}){inputsMap:TreeMap0{^(&quot;ShowBubbles&quot;,&lt;F)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean0,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean0,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap1{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,&lt;F),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap1,plots{3:{hiding=@Boolean0},4:{hiding=@Boolean0}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean0,plots{0:{color=@CustomColor1}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=123,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="COIN" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL CMG="10.0" COIN="10.0" JPM="10.0" QQQ="10.0" TSM="10.0" XLF="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL CMG="1.0" COIN="1.0" JPM="1.0" QQQ="1.0" TSM="1.0" XLF="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL CMG="-1.0" COIN="-1.0" JPM="-1.0" QQQ="-1.0" TSM="-1.0" XLF="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL CMG="2.0" COIN="2.0" JPM="2.0" QQQ="2.0" TSM="2.0" XLF="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL CMG="-2.0" COIN="-2.0" JPM="-2.0" QQQ="-2.0" TSM="-2.0" XLF="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL CMG="3.0" COIN="3.0" JPM="3.0" QQQ="3.0" TSM="3.0" XLF="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL CMG="-3.0" COIN="-3.0" JPM="-3.0" QQQ="-3.0" TSM="-3.0" XLF="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;5m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=18973.45201957d,minValue=18849.14635624d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=7.407407407407407d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=316,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=123,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2008-2024\n#\n\ndeclare real_size;\ndeclare on_volume;\ndeclare hide_on_intraday;\n\nplot Data = open_interest();&quot;,name=&quot;OpenInterest&quot;}))}}}}" SYMBOL="/NQ:XCME" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="FUTURE" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="1.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SMH" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;m&quot;),colors{6::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=!%0.CustomColor.findByIndex(&quot;7&quot;),monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=244.58315778d,minValue=242.63871085d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=11.494252873563218d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=343,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor0}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=96,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="SMH" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" PLTR="10.0" SMH="10.0" SOX="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" PLTR="1.0" SMH="1.0" SOX="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" PLTR="-1.0" SMH="-1.0" SOX="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" PLTR="2.0" SMH="2.0" SOX="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" PLTR="-2.0" SMH="-2.0" SOX="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" PLTR="3.0" SMH="3.0" SOX="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" PLTR="-3.0" SMH="-3.0" SOX="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5004955401387512">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.49950445986124875">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
        <TRADE_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TRADE"/>
        <VOICE_CHAT PLAYBACK_LAST_VOLUME_BEFORE_MUTED="1.0" PLAYBACK_VOLUME="1.0" RECORDING_LAST_VOLUME_BEFORE_MUTED="1.0" RECORDING_VOLUME="1.0"/>
      </DESKTOP>
      <DETACHED_FRAME_2 ALWAYS_ON_TOP="false" HEIGHT="1080" LAYOUT="CHARTS_GROUP" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1920" X="70" Y="0">
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE"/>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SORTING COLUMN="TIME" ORDER="-1"/>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="QQQ" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=459.65509483d,minValue=456.6273144d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=9.25925925925926d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=321,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;input fvg_threshold = 1;\ninput bpr_threshold = 1;\ninput bars_since = 10;\ninput only_clean_bpr = no;\n\ndef new_fvg_bearish = if low[2] - high &gt; fvg_threshold then yes else no;\ndef new_fvg_bullish = if low - high[2] &gt; fvg_threshold then yes else no;\n\n\n# Bullish BPR\ndef new_bear = if new_fvg_bearish then 1 else new_bear[1] + 1;\ndef bullish_bear_fvg_high = if new_bear == 1 then low[2] else bullish_bear_fvg_high[1];\ndef bullish_bear_fvg_low = if new_bear == 1 then high else bullish_bear_fvg_low[1];\n\ndef bull_cond_1 = new_fvg_bullish and new_fvg_bearish within bars_since bars;\n\ndef bull_fvg_high = if bull_cond_1 then low else bull_fvg_high[1];\ndef bull_fvg_low = if bull_cond_1 then high[2] else bull_fvg_low[1];\n\ndef bull_cond_2 = if bull_cond_1 then if bullish_bear_fvg_low + bullish_bear_fvg_high + bull_fvg_low + bull_fvg_high &gt; Max(bullish_bear_fvg_low, bull_fvg_low) - Min(bullish_bear_fvg_high, bull_fvg_high) then yes else no else no;\n\ndef bull_combined_low = if bull_cond_1 and bull_cond_2 then Max(bullish_bear_fvg_low, bull_fvg_low) else bull_combined_low[1];\ndef bull_combined_high = if bull_cond_1 and bull_cond_2 then Min(bullish_bear_fvg_high, bull_fvg_high) else bull_combined_high[1];\n\ndef bull_cond_3 = if only_clean_bpr then fold i = 2 to bars_since with j = yes do if i &lt; new_bear and high[i] &gt; bull_combined_low then j and no else j and yes else yes;\n\ndef bull_result = if bull_cond_1 and bull_cond_2 and (bull_combined_high - bull_combined_low &gt; bpr_threshold) then yes else if low &lt; bull_combined_low then double.nan else bull_result[1];\n\ndef bull_result_high = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_high else bull_result_high[1];\ndef bull_result_low = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_low else bull_result_low[1];\n\n\n# Bearish BPR\ndef new_bull = if new_fvg_bullish then 1 else new_bull[1] + 1;\ndef bearish_bull_fvg_high = if new_bull == 1 then low else bearish_bull_fvg_high[1];\ndef bearish_bull_fvg_low = if new_bull == 1 then high[2] else bearish_bull_fvg_low[1];\n\ndef bear_cond_1 = new_fvg_bearish and new_fvg_bullish within bars_since bars;\n\ndef bear_fvg_high = if bear_cond_1 then low[2] else bear_fvg_high[1];\ndef bear_fvg_low = if bear_cond_1 then high else bear_fvg_low[1];\n\ndef bear_cond_2 = if bear_cond_1 then if bearish_bull_fvg_low + bearish_bull_fvg_high + bear_fvg_low + bear_fvg_high &gt; Max(bearish_bull_fvg_low, bear_fvg_low) - Min(bearish_bull_fvg_high, bear_fvg_high) then yes else no else no;\n\ndef bear_combined_low = if bear_cond_1 and bear_cond_2 then Max(bearish_bull_fvg_low, bear_fvg_low) else bear_combined_low[1];\ndef bear_combined_high = if bear_cond_1 and bear_cond_2 then Min(bearish_bull_fvg_high, bear_fvg_high) else bear_combined_high[1];\n\ndef bear_cond_3 = if only_clean_bpr then fold k = 2 to bars_since with p = yes do if k &lt; new_bull and low[k] &lt; bear_combined_high then p and no else p and yes else yes;\n\ndef bear_result = if bear_cond_1 and bear_cond_2 and bear_cond_3 and (bear_combined_high - bear_combined_low &gt; bpr_threshold) then yes else if high &gt; bear_combined_high then double.nan else bear_result[1];\n\ndef bear_result_high = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_high else bear_result_high[1];\ndef bear_result_low = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_low else bear_result_low[1];\n\n\n# Plotting\ndef bull_signal = if bull_result then yes else no;\ndef bh = if bull_result then bull_result_high else bh[1];\ndef bh1 = bh;\ndef bl = if bull_result then bull_result_low else bl[1];\ndef bl1 = bl;\n\ndef bear_signal = if bear_result then yes else no;\ndef ph = if bear_result then bear_result_high else ph[1];\ndef ph1 = ph;\ndef pl = if bear_result then bear_result_low else pl[1];\ndef pl1 = pl;\n\nDefineGlobalColor(\&quot;Bullish\&quot;, Color.GREEN);\nDefineGlobalColor(\&quot;Bearish\&quot;, Color.RED);\nAddCloud(if bull_signal then bh1 else Double.NaN, if bull_signal then bl1 else Double.NaN,  GlobalColor(\&quot;Bullish\&quot;));\nAddCloud(if bear_signal then ph1 else Double.NaN, if bear_signal then pl1 else Double.NaN,  GlobalColor(\&quot;Bearish\&quot;));&quot;,name=&quot;_6eb19cce_cb9c_4a91_bda7_58f957108e00&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# Previous Day High/Low/Close + Premarket High/Low + High/Low/Open of Day + ATR Lines\n# Created by Wiinii\n# V1.6\n# Some code based on code by Mobius (premarket) and TraderKevin (ATR lines\n# https://usethinkscript.com/threads/previous-day-high-low-close-premarket-high-low-high-low-open-of-day-for-thinkorswim.13139/\n\ndeclare hide_on_daily;\n\ninput length = 1;\ninput showOnlyLastPeriod = yes;\ninput ShowBubbles = yes;\ninput locate_bubbles_at = {default Expansion, Time};\ninput locate_bubbles_at_time = 800;\ninput BarsFromExpansion = 1;\ninput ShowPricesInBubbles = yes;\n\ndef bn = BarNumber();\ndef na = Double.NaN;\ndef h  = high;\ndef l  = low;\ndef o = open;\ndef c = close;\ndef v = volume;\ndef aggregationPeriod = AggregationPeriod.DAY;\ndef displace = -1;\ndef timeopen = SecondsFromTime(locate_bubbles_at_time) == 0;\ndef isExpansion = locate_bubbles_at == locate_bubbles_at.Expansion and IsNaN(close);\ndef firstExpansionBar = if !IsNaN(close[-1]) and isExpansion then 1 else if isExpansion then firstExpansionBar[1] + 1 else 0;\ndef BubbleLocation = if locate_bubbles_at == locate_bubbles_at.Time then timeopen else isExpansion and firstExpansionBar == BarsFromExpansion;\n\n#----- Previous Day High/Low/Close -----#\n\n\nplot PD_High;\nplot PD_Low;\nplot PD_Close;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PD_High = na;\n    PD_Low = na;\n    PD_Close = na;\n} else {\n    PD_High = Highest(high(period = aggregationPeriod)[-displace], length);\n    PD_Low = Lowest(low(period = aggregationPeriod)[-displace], length);\n    PD_Close = close(period = aggregationPeriod)[-displace];\n}\n\nPD_High.SetDefaultColor(Color.DARK_ORANGE);\nPD_High.SetStyle(Curve.LONG_DASH);\nPD_High.SetLineWeight(2);\nPD_High.HideTitle();\n\nPD_Low.SetDefaultColor(Color.DARK_ORANGE);\nPD_Low.SetStyle(Curve.LONG_DASH);\nPD_Low.SetLineWeight(2);\nPD_Low.HideTitle();\n\nPD_Close.SetDefaultColor(Color.WHITE);\nPD_Close.SetStyle(Curve.LONG_DASH);\nPD_Close.SetLineWeight(2);\nPD_Close.HideTitle();\n\nDefineGlobalColor(\&quot;PD_High\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_High, \&quot;PDH: \&quot; + (if ShowPricesInBubbles then AsText(PD_High) else \&quot;\&quot;), GlobalColor(\&quot;PD_High\&quot;));\n\nDefineGlobalColor(\&quot;PD_Low\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Low, \&quot;PDL: \&quot; + (if ShowPricesInBubbles then AsText(PD_Low) else \&quot;\&quot;), GlobalColor(\&quot;PD_Low\&quot;), no);\n\nDefineGlobalColor(\&quot;PD_Close\&quot;, Color.WHITE);\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Close, \&quot;PDC: \&quot; + (if ShowPricesInBubbles then AsText(PD_Close) else \&quot;\&quot;), GlobalColor(\&quot;PD_Close\&quot;));\n\nPD_High.HideBubble();\nPD_Low.HideBubble();\nPD_Close.HideBubble();\n\n\n#----- Premarket High/Low -----# Thanks to Mobius\n\ndef GlobeX = GetTime() &lt; RegularTradingStart(GetYYYYMMDD());\n\ndef vol = if GlobeX and !GlobeX[1]\nthen v\nelse if GlobeX\nthen vol[1] + v\nelse na;\n\ndef GlobeX_Volume = vol;\n\ndef ONhigh = if GlobeX and !GlobeX[1]\nthen h\nelse if GlobeX and\nh &gt; ONhigh[1]\nthen h\nelse ONhigh[1];\n\ndef ONhighBar = if GlobeX and h == ONhigh\nthen bn\nelse na;\n\ndef ONlow = if GlobeX and !GlobeX[1]\nthen l\nelse if GlobeX and\nl &lt; ONlow[1]\nthen l\nelse ONlow[1];\n\ndef ONlowBar = if GlobeX and l == ONlow\nthen bn\nelse na;\n\ndef OverNightHigh = if BarNumber() == HighestAll(ONhighBar)\nthen ONhigh\nelse OverNightHigh[1];\n\ndef OverNightLow = if BarNumber() == HighestAll(ONlowBar)\nthen ONlow\nelse OverNightLow[1];\n\nplot PM_High;\nplot PM_Low;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PM_High = na;\n    PM_Low = na;\n} else {\n    PM_High = if OverNightHigh &gt; 0 then OverNightHigh else na;\n    PM_Low = if OverNightLow &gt; 0 then OverNightLow else na;\n}\n\n#PM_High.SetHiding(!PlotOverNightExtremes);\nPM_High.SetLineWeight(2);\nPM_High.SetDefaultColor(Color.CYAN);\nPM_High.SetStyle(Curve.LONG_DASH);\nPM_High.HideBubble();\nPM_High.HideTitle();\n\n#PM_Low.SetHiding(!PlotOverNightExtremes);\nPM_Low.SetStyle(Curve.LONG_DASH);\nPM_Low.SetDefaultColor(Color.CYAN);\nPM_Low.HideBubble();\nPM_Low.HideTitle();\n\nDefineGlobalColor(\&quot;PM_High\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONhighBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_High, \&quot;PMH: \&quot; + (if ShowPricesInBubbles then AsText(PM_High) else \&quot;\&quot;), GlobalColor(\&quot;PM_High\&quot;));\n\nDefineGlobalColor(\&quot;PM_Low\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONlowBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_Low, \&quot;PML: \&quot; + (if ShowPricesInBubbles then AsText(PM_Low) else \&quot;\&quot;), GlobalColor(\&quot;PM_Low\&quot;), no);  \n\n\n#----- Today Open/High/Low -----#\n\n\nplot High_of_Day;\nplot Low_of_Day;\nplot DayOpen;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    DayOpen = na;\n    High_of_Day = na;\n    Low_of_Day = na;\n} else {\n    DayOpen = open(period = aggregationPeriod)[0];\n    High_of_Day = Highest(high(period = aggregationPeriod), length);\n    Low_of_Day = Lowest(low(period = aggregationPeriod), length);\n}\n\nDayOpen.SetDefaultColor (Color.GRAY);\nDayOpen.SetPaintingStrategy(PaintingStrategy.DASHES);\nDayOpen.SetLineWeight(2);\nDayOpen.HideTitle();\n\nHigh_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nHigh_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nHigh_of_Day.SetLineWeight(2);\nHigh_of_Day.HideTitle();\n\nLow_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nLow_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nLow_of_Day.SetLineWeight(2);\nLow_of_Day.HideTitle();\n\nDefineGlobalColor(\&quot;Open\&quot;, Color.LIGHT_GRAY);\nAddChartBubble(ShowBubbles and BubbleLocation, DayOpen, \&quot;Open: \&quot; + (if ShowPricesInBubbles then AsText(DayOpen) else \&quot;\&quot;), GlobalColor(\&quot;Open\&quot;));\n\nDefineGlobalColor(\&quot;High_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, High_of_Day, \&quot;HOD: \&quot; + (if ShowPricesInBubbles then AsText(High_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;High_of_Day\&quot;));\n\nDefineGlobalColor(\&quot;Low_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, Low_of_Day, \&quot;LOD: \&quot; + (if ShowPricesInBubbles then AsText(Low_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;Low_of_Day\&quot;), no);\n\n#----- ATR Lines -----# Thaanks to TraderKevin\ninput showAtrLines = Yes;\ninput atrLinesFrom = {default pdc, dayOpen};\ninput ATRlength = 14;\ninput averageType = AverageType.WILDERS;\n\ndef ATR = MovingAverage(averageType, TrueRange(high(period = ”DAY”)[1], close(period = ”DAY”)[1], low(period = ”DAY”)[1]), ATRlength);\n\nplot hatr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen + ATR else PD_Close + ATR;\nplot latr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen - ATR else PD_Close - ATR;\n\nhatr.SetLineWeight(5);\nhatr.SetDefaultColor(Color.RED);\nhatr.SetStyle(Curve.LONG_DASH);\nhatr.HideBubble();\nhatr.HideTitle();\nhatr.SetHiding(showAtrLines == no);\n\nlatr.SetLineWeight(5);\nlatr.SetStyle(Curve.LONG_DASH);\nlatr.SetDefaultColor(Color.GREEN);\nlatr.HideBubble();\nlatr.HideTitle();\nlatr.SetHiding(showAtrLines == no);\n\nDefineGlobalColor(\&quot;hatr\&quot;, Color.PINK);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, hatr, \&quot;ATRH: \&quot; + (if ShowPricesInBubbles then AsText(hatr) else \&quot;\&quot;), GlobalColor(\&quot;hatr\&quot;));\n\nDefineGlobalColor(\&quot;latr\&quot;, Color.LIGHT_GREEN);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, latr, \&quot;ATRL: \&quot; + (if ShowPricesInBubbles then AsText(latr) else \&quot;\&quot;), GlobalColor(\&quot;latr\&quot;), no);&quot;,name=&quot;_678235d3_e927_435d_b36b_2e7ac1718c29&quot;}){inputsMap:TreeMap0{^(&quot;ShowBubbles&quot;,&lt;F)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap1{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,&lt;F),^(&quot;timePerProfile&quot;,&quot;HOUR&quot;)},inputsMap=@TreeMap1,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="QQQ" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="10.0" GOOG="10.0" META="10.0" QQQ="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="1.0" GOOG="1.0" META="1.0" QQQ="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AMD="-1.0" GOOG="-1.0" META="-1.0" QQQ="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="2.0" GOOG="2.0" META="2.0" QQQ="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-2.0" GOOG="-2.0" META="-2.0" QQQ="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="3.0" GOOG="3.0" META="3.0" QQQ="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AMD="-3.0" GOOG="-3.0" META="-3.0" QQQ="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="QQQ" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=463.40012583d,minValue=449.99753307d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=6.4935064935064934d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings.shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;after hours&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=310,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=135,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="QQQ" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL ARM="10.0" QQQ="10.0" SPY="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL ARM="1.0" QQQ="1.0" SPY="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL ARM="-1.0" QQQ="-1.0" SPY="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL ARM="2.0" QQQ="2.0" SPY="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL ARM="-2.0" QQQ="-2.0" SPY="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL ARM="3.0" QQQ="3.0" SPY="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL ARM="-3.0" QQQ="-3.0" SPY="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SPY" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=530.45461635d,minValue=527.92683741d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=12.195121951219512d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=320,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;input fvg_threshold = 1;\ninput bpr_threshold = 1;\ninput bars_since = 10;\ninput only_clean_bpr = no;\n\ndef new_fvg_bearish = if low[2] - high &gt; fvg_threshold then yes else no;\ndef new_fvg_bullish = if low - high[2] &gt; fvg_threshold then yes else no;\n\n\n# Bullish BPR\ndef new_bear = if new_fvg_bearish then 1 else new_bear[1] + 1;\ndef bullish_bear_fvg_high = if new_bear == 1 then low[2] else bullish_bear_fvg_high[1];\ndef bullish_bear_fvg_low = if new_bear == 1 then high else bullish_bear_fvg_low[1];\n\ndef bull_cond_1 = new_fvg_bullish and new_fvg_bearish within bars_since bars;\n\ndef bull_fvg_high = if bull_cond_1 then low else bull_fvg_high[1];\ndef bull_fvg_low = if bull_cond_1 then high[2] else bull_fvg_low[1];\n\ndef bull_cond_2 = if bull_cond_1 then if bullish_bear_fvg_low + bullish_bear_fvg_high + bull_fvg_low + bull_fvg_high &gt; Max(bullish_bear_fvg_low, bull_fvg_low) - Min(bullish_bear_fvg_high, bull_fvg_high) then yes else no else no;\n\ndef bull_combined_low = if bull_cond_1 and bull_cond_2 then Max(bullish_bear_fvg_low, bull_fvg_low) else bull_combined_low[1];\ndef bull_combined_high = if bull_cond_1 and bull_cond_2 then Min(bullish_bear_fvg_high, bull_fvg_high) else bull_combined_high[1];\n\ndef bull_cond_3 = if only_clean_bpr then fold i = 2 to bars_since with j = yes do if i &lt; new_bear and high[i] &gt; bull_combined_low then j and no else j and yes else yes;\n\ndef bull_result = if bull_cond_1 and bull_cond_2 and (bull_combined_high - bull_combined_low &gt; bpr_threshold) then yes else if low &lt; bull_combined_low then double.nan else bull_result[1];\n\ndef bull_result_high = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_high else bull_result_high[1];\ndef bull_result_low = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_low else bull_result_low[1];\n\n\n# Bearish BPR\ndef new_bull = if new_fvg_bullish then 1 else new_bull[1] + 1;\ndef bearish_bull_fvg_high = if new_bull == 1 then low else bearish_bull_fvg_high[1];\ndef bearish_bull_fvg_low = if new_bull == 1 then high[2] else bearish_bull_fvg_low[1];\n\ndef bear_cond_1 = new_fvg_bearish and new_fvg_bullish within bars_since bars;\n\ndef bear_fvg_high = if bear_cond_1 then low[2] else bear_fvg_high[1];\ndef bear_fvg_low = if bear_cond_1 then high else bear_fvg_low[1];\n\ndef bear_cond_2 = if bear_cond_1 then if bearish_bull_fvg_low + bearish_bull_fvg_high + bear_fvg_low + bear_fvg_high &gt; Max(bearish_bull_fvg_low, bear_fvg_low) - Min(bearish_bull_fvg_high, bear_fvg_high) then yes else no else no;\n\ndef bear_combined_low = if bear_cond_1 and bear_cond_2 then Max(bearish_bull_fvg_low, bear_fvg_low) else bear_combined_low[1];\ndef bear_combined_high = if bear_cond_1 and bear_cond_2 then Min(bearish_bull_fvg_high, bear_fvg_high) else bear_combined_high[1];\n\ndef bear_cond_3 = if only_clean_bpr then fold k = 2 to bars_since with p = yes do if k &lt; new_bull and low[k] &lt; bear_combined_high then p and no else p and yes else yes;\n\ndef bear_result = if bear_cond_1 and bear_cond_2 and bear_cond_3 and (bear_combined_high - bear_combined_low &gt; bpr_threshold) then yes else if high &gt; bear_combined_high then double.nan else bear_result[1];\n\ndef bear_result_high = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_high else bear_result_high[1];\ndef bear_result_low = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_low else bear_result_low[1];\n\n\n# Plotting\ndef bull_signal = if bull_result then yes else no;\ndef bh = if bull_result then bull_result_high else bh[1];\ndef bh1 = bh;\ndef bl = if bull_result then bull_result_low else bl[1];\ndef bl1 = bl;\n\ndef bear_signal = if bear_result then yes else no;\ndef ph = if bear_result then bear_result_high else ph[1];\ndef ph1 = ph;\ndef pl = if bear_result then bear_result_low else pl[1];\ndef pl1 = pl;\n\nDefineGlobalColor(\&quot;Bullish\&quot;, Color.GREEN);\nDefineGlobalColor(\&quot;Bearish\&quot;, Color.RED);\nAddCloud(if bull_signal then bh1 else Double.NaN, if bull_signal then bl1 else Double.NaN,  GlobalColor(\&quot;Bullish\&quot;));\nAddCloud(if bear_signal then ph1 else Double.NaN, if bear_signal then pl1 else Double.NaN,  GlobalColor(\&quot;Bearish\&quot;));&quot;,name=&quot;_6eb19cce_cb9c_4a91_bda7_58f957108e00&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# Previous Day High/Low/Close + Premarket High/Low + High/Low/Open of Day + ATR Lines\n# Created by Wiinii\n# V1.6\n# Some code based on code by Mobius (premarket) and TraderKevin (ATR lines\n# https://usethinkscript.com/threads/previous-day-high-low-close-premarket-high-low-high-low-open-of-day-for-thinkorswim.13139/\n\ndeclare hide_on_daily;\n\ninput length = 1;\ninput showOnlyLastPeriod = yes;\ninput ShowBubbles = yes;\ninput locate_bubbles_at = {default Expansion, Time};\ninput locate_bubbles_at_time = 800;\ninput BarsFromExpansion = 1;\ninput ShowPricesInBubbles = yes;\n\ndef bn = BarNumber();\ndef na = Double.NaN;\ndef h  = high;\ndef l  = low;\ndef o = open;\ndef c = close;\ndef v = volume;\ndef aggregationPeriod = AggregationPeriod.DAY;\ndef displace = -1;\ndef timeopen = SecondsFromTime(locate_bubbles_at_time) == 0;\ndef isExpansion = locate_bubbles_at == locate_bubbles_at.Expansion and IsNaN(close);\ndef firstExpansionBar = if !IsNaN(close[-1]) and isExpansion then 1 else if isExpansion then firstExpansionBar[1] + 1 else 0;\ndef BubbleLocation = if locate_bubbles_at == locate_bubbles_at.Time then timeopen else isExpansion and firstExpansionBar == BarsFromExpansion;\n\n#----- Previous Day High/Low/Close -----#\n\n\nplot PD_High;\nplot PD_Low;\nplot PD_Close;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PD_High = na;\n    PD_Low = na;\n    PD_Close = na;\n} else {\n    PD_High = Highest(high(period = aggregationPeriod)[-displace], length);\n    PD_Low = Lowest(low(period = aggregationPeriod)[-displace], length);\n    PD_Close = close(period = aggregationPeriod)[-displace];\n}\n\nPD_High.SetDefaultColor(Color.DARK_ORANGE);\nPD_High.SetStyle(Curve.LONG_DASH);\nPD_High.SetLineWeight(2);\nPD_High.HideTitle();\n\nPD_Low.SetDefaultColor(Color.DARK_ORANGE);\nPD_Low.SetStyle(Curve.LONG_DASH);\nPD_Low.SetLineWeight(2);\nPD_Low.HideTitle();\n\nPD_Close.SetDefaultColor(Color.WHITE);\nPD_Close.SetStyle(Curve.LONG_DASH);\nPD_Close.SetLineWeight(2);\nPD_Close.HideTitle();\n\nDefineGlobalColor(\&quot;PD_High\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_High, \&quot;PDH: \&quot; + (if ShowPricesInBubbles then AsText(PD_High) else \&quot;\&quot;), GlobalColor(\&quot;PD_High\&quot;));\n\nDefineGlobalColor(\&quot;PD_Low\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Low, \&quot;PDL: \&quot; + (if ShowPricesInBubbles then AsText(PD_Low) else \&quot;\&quot;), GlobalColor(\&quot;PD_Low\&quot;), no);\n\nDefineGlobalColor(\&quot;PD_Close\&quot;, Color.WHITE);\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Close, \&quot;PDC: \&quot; + (if ShowPricesInBubbles then AsText(PD_Close) else \&quot;\&quot;), GlobalColor(\&quot;PD_Close\&quot;));\n\nPD_High.HideBubble();\nPD_Low.HideBubble();\nPD_Close.HideBubble();\n\n\n#----- Premarket High/Low -----# Thanks to Mobius\n\ndef GlobeX = GetTime() &lt; RegularTradingStart(GetYYYYMMDD());\n\ndef vol = if GlobeX and !GlobeX[1]\nthen v\nelse if GlobeX\nthen vol[1] + v\nelse na;\n\ndef GlobeX_Volume = vol;\n\ndef ONhigh = if GlobeX and !GlobeX[1]\nthen h\nelse if GlobeX and\nh &gt; ONhigh[1]\nthen h\nelse ONhigh[1];\n\ndef ONhighBar = if GlobeX and h == ONhigh\nthen bn\nelse na;\n\ndef ONlow = if GlobeX and !GlobeX[1]\nthen l\nelse if GlobeX and\nl &lt; ONlow[1]\nthen l\nelse ONlow[1];\n\ndef ONlowBar = if GlobeX and l == ONlow\nthen bn\nelse na;\n\ndef OverNightHigh = if BarNumber() == HighestAll(ONhighBar)\nthen ONhigh\nelse OverNightHigh[1];\n\ndef OverNightLow = if BarNumber() == HighestAll(ONlowBar)\nthen ONlow\nelse OverNightLow[1];\n\nplot PM_High;\nplot PM_Low;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PM_High = na;\n    PM_Low = na;\n} else {\n    PM_High = if OverNightHigh &gt; 0 then OverNightHigh else na;\n    PM_Low = if OverNightLow &gt; 0 then OverNightLow else na;\n}\n\n#PM_High.SetHiding(!PlotOverNightExtremes);\nPM_High.SetLineWeight(2);\nPM_High.SetDefaultColor(Color.CYAN);\nPM_High.SetStyle(Curve.LONG_DASH);\nPM_High.HideBubble();\nPM_High.HideTitle();\n\n#PM_Low.SetHiding(!PlotOverNightExtremes);\nPM_Low.SetStyle(Curve.LONG_DASH);\nPM_Low.SetDefaultColor(Color.CYAN);\nPM_Low.HideBubble();\nPM_Low.HideTitle();\n\nDefineGlobalColor(\&quot;PM_High\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONhighBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_High, \&quot;PMH: \&quot; + (if ShowPricesInBubbles then AsText(PM_High) else \&quot;\&quot;), GlobalColor(\&quot;PM_High\&quot;));\n\nDefineGlobalColor(\&quot;PM_Low\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONlowBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_Low, \&quot;PML: \&quot; + (if ShowPricesInBubbles then AsText(PM_Low) else \&quot;\&quot;), GlobalColor(\&quot;PM_Low\&quot;), no);  \n\n\n#----- Today Open/High/Low -----#\n\n\nplot High_of_Day;\nplot Low_of_Day;\nplot DayOpen;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    DayOpen = na;\n    High_of_Day = na;\n    Low_of_Day = na;\n} else {\n    DayOpen = open(period = aggregationPeriod)[0];\n    High_of_Day = Highest(high(period = aggregationPeriod), length);\n    Low_of_Day = Lowest(low(period = aggregationPeriod), length);\n}\n\nDayOpen.SetDefaultColor (Color.GRAY);\nDayOpen.SetPaintingStrategy(PaintingStrategy.DASHES);\nDayOpen.SetLineWeight(2);\nDayOpen.HideTitle();\n\nHigh_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nHigh_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nHigh_of_Day.SetLineWeight(2);\nHigh_of_Day.HideTitle();\n\nLow_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nLow_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nLow_of_Day.SetLineWeight(2);\nLow_of_Day.HideTitle();\n\nDefineGlobalColor(\&quot;Open\&quot;, Color.LIGHT_GRAY);\nAddChartBubble(ShowBubbles and BubbleLocation, DayOpen, \&quot;Open: \&quot; + (if ShowPricesInBubbles then AsText(DayOpen) else \&quot;\&quot;), GlobalColor(\&quot;Open\&quot;));\n\nDefineGlobalColor(\&quot;High_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, High_of_Day, \&quot;HOD: \&quot; + (if ShowPricesInBubbles then AsText(High_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;High_of_Day\&quot;));\n\nDefineGlobalColor(\&quot;Low_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, Low_of_Day, \&quot;LOD: \&quot; + (if ShowPricesInBubbles then AsText(Low_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;Low_of_Day\&quot;), no);\n\n#----- ATR Lines -----# Thaanks to TraderKevin\ninput showAtrLines = Yes;\ninput atrLinesFrom = {default pdc, dayOpen};\ninput ATRlength = 14;\ninput averageType = AverageType.WILDERS;\n\ndef ATR = MovingAverage(averageType, TrueRange(high(period = ”DAY”)[1], close(period = ”DAY”)[1], low(period = ”DAY”)[1]), ATRlength);\n\nplot hatr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen + ATR else PD_Close + ATR;\nplot latr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen - ATR else PD_Close - ATR;\n\nhatr.SetLineWeight(5);\nhatr.SetDefaultColor(Color.RED);\nhatr.SetStyle(Curve.LONG_DASH);\nhatr.HideBubble();\nhatr.HideTitle();\nhatr.SetHiding(showAtrLines == no);\n\nlatr.SetLineWeight(5);\nlatr.SetStyle(Curve.LONG_DASH);\nlatr.SetDefaultColor(Color.GREEN);\nlatr.HideBubble();\nlatr.HideTitle();\nlatr.SetHiding(showAtrLines == no);\n\nDefineGlobalColor(\&quot;hatr\&quot;, Color.PINK);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, hatr, \&quot;ATRH: \&quot; + (if ShowPricesInBubbles then AsText(hatr) else \&quot;\&quot;), GlobalColor(\&quot;hatr\&quot;));\n\nDefineGlobalColor(\&quot;latr\&quot;, Color.LIGHT_GREEN);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, latr, \&quot;ATRL: \&quot; + (if ShowPricesInBubbles then AsText(latr) else \&quot;\&quot;), GlobalColor(\&quot;latr\&quot;), no);&quot;,name=&quot;_678235d3_e927_435d_b36b_2e7ac1718c29&quot;}){inputsMap:TreeMap0{^(&quot;ShowBubbles&quot;,&lt;F)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap1{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,&lt;F),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap1,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="SPY" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SPY" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.chartdata,1:com.devexperts.tos.thinkscript.data,2:com.devexperts.toschart.control.subgraph,3:com.devexperts.toschart.elstudies,4:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;15m&quot;),colors{7::CustomColor0,6::CustomColor1}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings.timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%0.ChartRange.findByCode(&quot;DAY5&quot;),@ChartAggregationPeriod0),!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%1.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=535.11612138d,minValue=523.04682867d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=6.622516556291391d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings.shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;after hours&quot;}},subgraphModels{!get(#%2.SubgraphId(&quot;Symbol&quot;)){height=320,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%1.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor1}}})}},!get(#%2.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%3.CompiledStudy.resolveStudy(#%4.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="SPY" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL SPY="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL SPY="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5004906771344455">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.49950932286555444">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
      </DETACHED_FRAME_2>
      <DETACHED_FRAME_3 ALWAYS_ON_TOP="false" HEIGHT="1080" LAYOUT="CHARTS_GROUP" STATE="MAXIMIZED_HORIZ  MAXIMIZED_VERT" WIDTH="1920" X="1920" Y="0">
        <CHARTS_GROUP ORDER_ENTRY_EXPANDED="false" SELECTED_LAYOUT="TOS CHARTS"/>
        <ORDER_ENTRY_AND_ORDER_QUEUE>
          <GROUP ALLOW_4DP_IN_QTY="true" MARKER="SINGLE"/>
          <ORDERBOOKPANEL SELECTED_TAB="0"/>
          <ORDER_AND_STRATEGY_BOOK EXPANDED="true"/>
          <ORDER_ENTRY_AND_SAVED_ORDERS EXPANDED="false">
            <PRICE_CONTROL CONDITION="1" CONDITION_LOCKED="false" PRICE="0.0" UNLOCKED="false"/>
          </ORDER_ENTRY_AND_SAVED_ORDERS>
          <SORTING COLUMN="TIME" ORDER="-1"/>
          <SWITCH POSITION="0"/>
        </ORDER_ENTRY_AND_ORDER_QUEUE>
        <TOS_CHARTS COLUMN_COUNT="2" DEFAULT_TYPE="CHART" ORDER_ENTRY_EXPANDED="false" ROW_COUNT="2">
          <CELL0 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="NFLX" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;3m&quot;),colors{6::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=!%0.CustomColor.findByIndex(&quot;7&quot;),monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=653.04859745d,minValue=644.5812074d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=13.513513513513514d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile FVG PDHL&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=321,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;input fvg_threshold = 1;\ninput bpr_threshold = 1;\ninput bars_since = 10;\ninput only_clean_bpr = no;\n\ndef new_fvg_bearish = if low[2] - high &gt; fvg_threshold then yes else no;\ndef new_fvg_bullish = if low - high[2] &gt; fvg_threshold then yes else no;\n\n\n# Bullish BPR\ndef new_bear = if new_fvg_bearish then 1 else new_bear[1] + 1;\ndef bullish_bear_fvg_high = if new_bear == 1 then low[2] else bullish_bear_fvg_high[1];\ndef bullish_bear_fvg_low = if new_bear == 1 then high else bullish_bear_fvg_low[1];\n\ndef bull_cond_1 = new_fvg_bullish and new_fvg_bearish within bars_since bars;\n\ndef bull_fvg_high = if bull_cond_1 then low else bull_fvg_high[1];\ndef bull_fvg_low = if bull_cond_1 then high[2] else bull_fvg_low[1];\n\ndef bull_cond_2 = if bull_cond_1 then if bullish_bear_fvg_low + bullish_bear_fvg_high + bull_fvg_low + bull_fvg_high &gt; Max(bullish_bear_fvg_low, bull_fvg_low) - Min(bullish_bear_fvg_high, bull_fvg_high) then yes else no else no;\n\ndef bull_combined_low = if bull_cond_1 and bull_cond_2 then Max(bullish_bear_fvg_low, bull_fvg_low) else bull_combined_low[1];\ndef bull_combined_high = if bull_cond_1 and bull_cond_2 then Min(bullish_bear_fvg_high, bull_fvg_high) else bull_combined_high[1];\n\ndef bull_cond_3 = if only_clean_bpr then fold i = 2 to bars_since with j = yes do if i &lt; new_bear and high[i] &gt; bull_combined_low then j and no else j and yes else yes;\n\ndef bull_result = if bull_cond_1 and bull_cond_2 and (bull_combined_high - bull_combined_low &gt; bpr_threshold) then yes else if low &lt; bull_combined_low then double.nan else bull_result[1];\n\ndef bull_result_high = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_high else bull_result_high[1];\ndef bull_result_low = if bull_result and bull_combined_low &lt; bull_combined_high then bull_combined_low else bull_result_low[1];\n\n\n# Bearish BPR\ndef new_bull = if new_fvg_bullish then 1 else new_bull[1] + 1;\ndef bearish_bull_fvg_high = if new_bull == 1 then low else bearish_bull_fvg_high[1];\ndef bearish_bull_fvg_low = if new_bull == 1 then high[2] else bearish_bull_fvg_low[1];\n\ndef bear_cond_1 = new_fvg_bearish and new_fvg_bullish within bars_since bars;\n\ndef bear_fvg_high = if bear_cond_1 then low[2] else bear_fvg_high[1];\ndef bear_fvg_low = if bear_cond_1 then high else bear_fvg_low[1];\n\ndef bear_cond_2 = if bear_cond_1 then if bearish_bull_fvg_low + bearish_bull_fvg_high + bear_fvg_low + bear_fvg_high &gt; Max(bearish_bull_fvg_low, bear_fvg_low) - Min(bearish_bull_fvg_high, bear_fvg_high) then yes else no else no;\n\ndef bear_combined_low = if bear_cond_1 and bear_cond_2 then Max(bearish_bull_fvg_low, bear_fvg_low) else bear_combined_low[1];\ndef bear_combined_high = if bear_cond_1 and bear_cond_2 then Min(bearish_bull_fvg_high, bear_fvg_high) else bear_combined_high[1];\n\ndef bear_cond_3 = if only_clean_bpr then fold k = 2 to bars_since with p = yes do if k &lt; new_bull and low[k] &lt; bear_combined_high then p and no else p and yes else yes;\n\ndef bear_result = if bear_cond_1 and bear_cond_2 and bear_cond_3 and (bear_combined_high - bear_combined_low &gt; bpr_threshold) then yes else if high &gt; bear_combined_high then double.nan else bear_result[1];\n\ndef bear_result_high = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_high else bear_result_high[1];\ndef bear_result_low = if bear_result and bear_combined_low &lt; bear_combined_high then bear_combined_low else bear_result_low[1];\n\n\n# Plotting\ndef bull_signal = if bull_result then yes else no;\ndef bh = if bull_result then bull_result_high else bh[1];\ndef bh1 = bh;\ndef bl = if bull_result then bull_result_low else bl[1];\ndef bl1 = bl;\n\ndef bear_signal = if bear_result then yes else no;\ndef ph = if bear_result then bear_result_high else ph[1];\ndef ph1 = ph;\ndef pl = if bear_result then bear_result_low else pl[1];\ndef pl1 = pl;\n\nDefineGlobalColor(\&quot;Bullish\&quot;, Color.GREEN);\nDefineGlobalColor(\&quot;Bearish\&quot;, Color.RED);\nAddCloud(if bull_signal then bh1 else Double.NaN, if bull_signal then bl1 else Double.NaN,  GlobalColor(\&quot;Bullish\&quot;));\nAddCloud(if bear_signal then ph1 else Double.NaN, if bear_signal then pl1 else Double.NaN,  GlobalColor(\&quot;Bearish\&quot;));&quot;,name=&quot;_6eb19cce_cb9c_4a91_bda7_58f957108e00&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# Previous Day High/Low/Close + Premarket High/Low + High/Low/Open of Day + ATR Lines\n# Created by Wiinii\n# V1.6\n# Some code based on code by Mobius (premarket) and TraderKevin (ATR lines\n# https://usethinkscript.com/threads/previous-day-high-low-close-premarket-high-low-high-low-open-of-day-for-thinkorswim.13139/\n\ndeclare hide_on_daily;\n\ninput length = 1;\ninput showOnlyLastPeriod = yes;\ninput ShowBubbles = yes;\ninput locate_bubbles_at = {default Expansion, Time};\ninput locate_bubbles_at_time = 800;\ninput BarsFromExpansion = 1;\ninput ShowPricesInBubbles = yes;\n\ndef bn = BarNumber();\ndef na = Double.NaN;\ndef h  = high;\ndef l  = low;\ndef o = open;\ndef c = close;\ndef v = volume;\ndef aggregationPeriod = AggregationPeriod.DAY;\ndef displace = -1;\ndef timeopen = SecondsFromTime(locate_bubbles_at_time) == 0;\ndef isExpansion = locate_bubbles_at == locate_bubbles_at.Expansion and IsNaN(close);\ndef firstExpansionBar = if !IsNaN(close[-1]) and isExpansion then 1 else if isExpansion then firstExpansionBar[1] + 1 else 0;\ndef BubbleLocation = if locate_bubbles_at == locate_bubbles_at.Time then timeopen else isExpansion and firstExpansionBar == BarsFromExpansion;\n\n#----- Previous Day High/Low/Close -----#\n\n\nplot PD_High;\nplot PD_Low;\nplot PD_Close;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PD_High = na;\n    PD_Low = na;\n    PD_Close = na;\n} else {\n    PD_High = Highest(high(period = aggregationPeriod)[-displace], length);\n    PD_Low = Lowest(low(period = aggregationPeriod)[-displace], length);\n    PD_Close = close(period = aggregationPeriod)[-displace];\n}\n\nPD_High.SetDefaultColor(Color.DARK_ORANGE);\nPD_High.SetStyle(Curve.LONG_DASH);\nPD_High.SetLineWeight(2);\nPD_High.HideTitle();\n\nPD_Low.SetDefaultColor(Color.DARK_ORANGE);\nPD_Low.SetStyle(Curve.LONG_DASH);\nPD_Low.SetLineWeight(2);\nPD_Low.HideTitle();\n\nPD_Close.SetDefaultColor(Color.WHITE);\nPD_Close.SetStyle(Curve.LONG_DASH);\nPD_Close.SetLineWeight(2);\nPD_Close.HideTitle();\n\nDefineGlobalColor(\&quot;PD_High\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_High, \&quot;PDH: \&quot; + (if ShowPricesInBubbles then AsText(PD_High) else \&quot;\&quot;), GlobalColor(\&quot;PD_High\&quot;));\n\nDefineGlobalColor(\&quot;PD_Low\&quot;, CreateColor(255, 204, 153));\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Low, \&quot;PDL: \&quot; + (if ShowPricesInBubbles then AsText(PD_Low) else \&quot;\&quot;), GlobalColor(\&quot;PD_Low\&quot;), no);\n\nDefineGlobalColor(\&quot;PD_Close\&quot;, Color.WHITE);\nAddChartBubble(ShowBubbles and BubbleLocation, PD_Close, \&quot;PDC: \&quot; + (if ShowPricesInBubbles then AsText(PD_Close) else \&quot;\&quot;), GlobalColor(\&quot;PD_Close\&quot;));\n\nPD_High.HideBubble();\nPD_Low.HideBubble();\nPD_Close.HideBubble();\n\n\n#----- Premarket High/Low -----# Thanks to Mobius\n\ndef GlobeX = GetTime() &lt; RegularTradingStart(GetYYYYMMDD());\n\ndef vol = if GlobeX and !GlobeX[1]\nthen v\nelse if GlobeX\nthen vol[1] + v\nelse na;\n\ndef GlobeX_Volume = vol;\n\ndef ONhigh = if GlobeX and !GlobeX[1]\nthen h\nelse if GlobeX and\nh &gt; ONhigh[1]\nthen h\nelse ONhigh[1];\n\ndef ONhighBar = if GlobeX and h == ONhigh\nthen bn\nelse na;\n\ndef ONlow = if GlobeX and !GlobeX[1]\nthen l\nelse if GlobeX and\nl &lt; ONlow[1]\nthen l\nelse ONlow[1];\n\ndef ONlowBar = if GlobeX and l == ONlow\nthen bn\nelse na;\n\ndef OverNightHigh = if BarNumber() == HighestAll(ONhighBar)\nthen ONhigh\nelse OverNightHigh[1];\n\ndef OverNightLow = if BarNumber() == HighestAll(ONlowBar)\nthen ONlow\nelse OverNightLow[1];\n\nplot PM_High;\nplot PM_Low;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    PM_High = na;\n    PM_Low = na;\n} else {\n    PM_High = if OverNightHigh &gt; 0 then OverNightHigh else na;\n    PM_Low = if OverNightLow &gt; 0 then OverNightLow else na;\n}\n\n#PM_High.SetHiding(!PlotOverNightExtremes);\nPM_High.SetLineWeight(2);\nPM_High.SetDefaultColor(Color.CYAN);\nPM_High.SetStyle(Curve.LONG_DASH);\nPM_High.HideBubble();\nPM_High.HideTitle();\n\n#PM_Low.SetHiding(!PlotOverNightExtremes);\nPM_Low.SetStyle(Curve.LONG_DASH);\nPM_Low.SetDefaultColor(Color.CYAN);\nPM_Low.HideBubble();\nPM_Low.HideTitle();\n\nDefineGlobalColor(\&quot;PM_High\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONhighBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_High, \&quot;PMH: \&quot; + (if ShowPricesInBubbles then AsText(PM_High) else \&quot;\&quot;), GlobalColor(\&quot;PM_High\&quot;));\n\nDefineGlobalColor(\&quot;PM_Low\&quot;, CreateColor(102, 255, 255));\nAddChartBubble(ShowBubbles and if locate_bubbles_at == locate_bubbles_at.Time then bn == ONlowBar else isExpansion and firstExpansionBar == BarsFromExpansion, PM_Low, \&quot;PML: \&quot; + (if ShowPricesInBubbles then AsText(PM_Low) else \&quot;\&quot;), GlobalColor(\&quot;PM_Low\&quot;), no);  \n\n\n#----- Today Open/High/Low -----#\n\n\nplot High_of_Day;\nplot Low_of_Day;\nplot DayOpen;\nif showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {\n    DayOpen = na;\n    High_of_Day = na;\n    Low_of_Day = na;\n} else {\n    DayOpen = open(period = aggregationPeriod)[0];\n    High_of_Day = Highest(high(period = aggregationPeriod), length);\n    Low_of_Day = Lowest(low(period = aggregationPeriod), length);\n}\n\nDayOpen.SetDefaultColor (Color.GRAY);\nDayOpen.SetPaintingStrategy(PaintingStrategy.DASHES);\nDayOpen.SetLineWeight(2);\nDayOpen.HideTitle();\n\nHigh_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nHigh_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nHigh_of_Day.SetLineWeight(2);\nHigh_of_Day.HideTitle();\n\nLow_of_Day.SetDefaultColor(CreateColor(0, 128, 255));\nLow_of_Day.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nLow_of_Day.SetLineWeight(2);\nLow_of_Day.HideTitle();\n\nDefineGlobalColor(\&quot;Open\&quot;, Color.LIGHT_GRAY);\nAddChartBubble(ShowBubbles and BubbleLocation, DayOpen, \&quot;Open: \&quot; + (if ShowPricesInBubbles then AsText(DayOpen) else \&quot;\&quot;), GlobalColor(\&quot;Open\&quot;));\n\nDefineGlobalColor(\&quot;High_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, High_of_Day, \&quot;HOD: \&quot; + (if ShowPricesInBubbles then AsText(High_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;High_of_Day\&quot;));\n\nDefineGlobalColor(\&quot;Low_of_Day\&quot;, CreateColor(102, 178, 255));\nAddChartBubble(ShowBubbles and BubbleLocation, Low_of_Day, \&quot;LOD: \&quot; + (if ShowPricesInBubbles then AsText(Low_of_Day) else \&quot;\&quot;), GlobalColor(\&quot;Low_of_Day\&quot;), no);\n\n#----- ATR Lines -----# Thaanks to TraderKevin\ninput showAtrLines = Yes;\ninput atrLinesFrom = {default pdc, dayOpen};\ninput ATRlength = 14;\ninput averageType = AverageType.WILDERS;\n\ndef ATR = MovingAverage(averageType, TrueRange(high(period = ”DAY”)[1], close(period = ”DAY”)[1], low(period = ”DAY”)[1]), ATRlength);\n\nplot hatr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen + ATR else PD_Close + ATR;\nplot latr = if atrLinesFrom  == atrLinesFrom .dayOpen then DayOpen - ATR else PD_Close - ATR;\n\nhatr.SetLineWeight(5);\nhatr.SetDefaultColor(Color.RED);\nhatr.SetStyle(Curve.LONG_DASH);\nhatr.HideBubble();\nhatr.HideTitle();\nhatr.SetHiding(showAtrLines == no);\n\nlatr.SetLineWeight(5);\nlatr.SetStyle(Curve.LONG_DASH);\nlatr.SetDefaultColor(Color.GREEN);\nlatr.HideBubble();\nlatr.HideTitle();\nlatr.SetHiding(showAtrLines == no);\n\nDefineGlobalColor(\&quot;hatr\&quot;, Color.PINK);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, hatr, \&quot;ATRH: \&quot; + (if ShowPricesInBubbles then AsText(hatr) else \&quot;\&quot;), GlobalColor(\&quot;hatr\&quot;));\n\nDefineGlobalColor(\&quot;latr\&quot;, Color.LIGHT_GREEN);\nAddChartBubble(ShowBubbles and showAtrLines and BubbleLocation, latr, \&quot;ATRL: \&quot; + (if ShowPricesInBubbles then AsText(latr) else \&quot;\&quot;), GlobalColor(\&quot;latr\&quot;), no);&quot;,name=&quot;_678235d3_e927_435d_b36b_2e7ac1718c29&quot;}){inputsMap:TreeMap0{^(&quot;ShowBubbles&quot;,&lt;F)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1,inputsMap.!get:Integer0(&quot;length&quot;)}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap1{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,@Integer0),^(&quot;showValueArea&quot;,&lt;F),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap1,plots{3:{hiding=@Boolean1},4:{hiding=@Boolean1}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor0}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="NFLX" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="3.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" AMD="10.0" AMZN="10.0" ARM="10.0" CAVA="10.0" COIN="10.0" FFIE="10.0" GOOG="10.0" JPM="10.0" MSFT="10.0" MU="10.0" NFLX="10.0" TSL="10.0" TSLA="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" AMD="1.0" AMZN="1.0" ARM="1.0" CAVA="1.0" COIN="1.0" FFIE="1.0" GOOG="1.0" JPM="1.0" MSFT="1.0" MU="1.0" NFLX="1.0" TSL="1.0" TSLA="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" AMD="-1.0" AMZN="-1.0" ARM="-1.0" CAVA="-1.0" COIN="-1.0" FFIE="-1.0" GOOG="-1.0" JPM="-1.0" MSFT="-1.0" MU="-1.0" NFLX="-1.0" TSL="-1.0" TSLA="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" AMD="2.0" AMZN="2.0" ARM="2.0" CAVA="2.0" COIN="2.0" FFIE="2.0" GOOG="2.0" JPM="2.0" MSFT="2.0" MU="2.0" NFLX="2.0" TSL="2.0" TSLA="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" AMD="-2.0" AMZN="-2.0" ARM="-2.0" CAVA="-2.0" COIN="-2.0" FFIE="-2.0" GOOG="-2.0" JPM="-2.0" MSFT="-2.0" MU="-2.0" NFLX="-2.0" TSL="-2.0" TSLA="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" AMD="3.0" AMZN="3.0" ARM="3.0" CAVA="3.0" COIN="3.0" FFIE="3.0" GOOG="3.0" JPM="3.0" MSFT="3.0" MU="3.0" NFLX="3.0" TSL="3.0" TSLA="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" AMD="-3.0" AMZN="-3.0" ARM="-3.0" CAVA="-3.0" COIN="-3.0" FFIE="-3.0" GOOG="-3.0" JPM="-3.0" MSFT="-3.0" MU="-3.0" NFLX="-3.0" TSL="-3.0" TSLA="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL0>
          <CELL1 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="COIN" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.toschart.model,1:com.devexperts.tos.chartdata,2:com.devexperts.tos.thinkscript.data,3:com.devexperts.toschart.control.subgraph,4:com.devexperts.toschart.elstudies,5:com.devexperts.toschart.script%owner{chartAggregationPeriods{!get:ChartAggregationPeriod0(&quot;30m&quot;),!get:ChartAggregationPeriod1(&quot;2m&quot;)},colors{7::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{monkeyChartsAggSettings=!%0.TimeFrameAggregationSettings.createTickOrTimeAggregation(!%1.ChartRange.findByCode(&quot;DAY3&quot;),@ChartAggregationPeriod0),priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!%0.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod1)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=@CustomColor0,monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%2.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=239.21185693d,minValue=229.23927185d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,&lt;F),^(&quot;Show Expiration Friday &quot;,&lt;F),^(&quot;Keep Price Zoom&quot;,&lt;F),^(&quot;enableLeftAxis&quot;,&lt;F),^(&quot;Fit expected price ranges&quot;,&lt;F),^(&quot;emphasizeDigitMPExpanded&quot;,&lt;F),^(&quot;showWicksCandleTrend&quot;,&lt;F),^(&quot;highlightEarnings&quot;,&lt;F),^(&quot;synchronizeCrosshair&quot;,&lt;F),^(&quot;myToolsMode&quot;,&lt;F),^(&quot;seasonalityStyle&quot;,&lt;F),^(&quot;Show Price Subgraph&quot;,&lt;F),^(&quot;closePriceLevel&quot;,&lt;F),^(&quot;Color Volume As Symbol Ticks&quot;,&lt;F),^(&quot;highlightPhantomRBars&quot;,&lt;F),^(&quot;Cross type &quot;,&lt;F),^(&quot;Fit Studies to Screen&quot;,&lt;F),^(&quot;Fit Orders&quot;,&lt;F),^(&quot;Bubbles as Percentage&quot;,&lt;F),^(&quot;hideStatusString&quot;,&lt;F),^(&quot;Show Studies &quot;,&lt;F),^(&quot;showWicksHeikinAshi&quot;,&lt;F),^(&quot;Alerts&quot;,&lt;F),^(&quot;Chart scale&quot;,&lt;F),^(&quot;Fit High/Low&quot;,&lt;F),^(&quot;Orders&quot;,&lt;F),^(&quot;Use Log Scale &quot;,&lt;F),^(&quot;Fit Study Markers to Screen&quot;,&lt;F),^(&quot;Fit Alerts&quot;,&lt;F),^(&quot;Fit patterns&quot;,&lt;F),^(&quot;Percentage View&quot;,&lt;F),^(&quot;Make Auto Zoom &quot;,&lt;F),^(&quot;Show Year Marking Line&quot;,&lt;F),^(&quot;Show Rollover Line&quot;,&lt;F),^(&quot;Show High/Low Bubbles &quot;,&lt;F),^(&quot;highlightStudies&quot;,&lt;F),^(&quot;Overlapped Volume&quot;,&lt;F),^(&quot;Show Symbol Logo&quot;,&lt;F),^(&quot;Show Last Price Bubble &quot;,&lt;F),^(&quot;emphasizeDigitMP&quot;,&lt;F),^(&quot;Snap crosshairs to&quot;,&lt;F),^(&quot;Show grid&quot;,&lt;F),^(&quot;showWicksCandle&quot;,&lt;F),^(&quot;Show trades&quot;,&lt;F),^(&quot;highlightSeasons&quot;,&lt;F),^(&quot;Snap drawings to&quot;,&lt;F),^(&quot;Extend Order/Alert Line to Left&quot;,&lt;F)},step=9.174311926605505d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,&lt;F),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,&lt;F),^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;showContractChangeEvents&quot;,&lt;F),^(&quot;futures_daily_close_price&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Theo Price&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,&lt;F),^(&quot;Show Trading Hours Only&quot;,&lt;F),^(&quot;Show Options&quot;,&lt;F),^(&quot;Show Volume Subgraph&quot;,&lt;F),^(&quot;Highlight Extended Hours&quot;,&lt;F),^(&quot;Show Corporate Actions&quot;,&lt;F),^(&quot;Show CNBC Video&quot;,&lt;F),^(&quot;startAtMarketOpen&quot;,&lt;F),^(&quot;adjustForDividends&quot;,&lt;F)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile vwap day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%3.SubgraphId(&quot;Symbol&quot;)){height=319,storableIndicators{+(!%4.CompiledStudy.resolveStudy(#%5.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2023-2024\n#\n\ninput numDevDn = -2.0;\ninput numDevUp = 2.0;\n@Date\ninput beginDate = 20200101;\n\ndef yyyyMmDd = GetYYYYMMDD();\ndef isStart = (yyyyMmDd &gt;= beginDate and yyyyMmDd[1] &lt; beginDate) or (yyyyMmDd == First(yyyyMmDd) and yyyyMmDd &gt;= beginDate);\n\ndef volumeSum;\ndef volumeVwapSum;\ndef volumeVwap2Sum;\n\nif (isStart) {\n    volumeSum = volume;\n    volumeVwapSum = volume * vwap;\n    volumeVwap2Sum = volume * Sqr(vwap);\n} else {\n    volumeSum = CompoundValue(1, volumeSum[1] + volume, Double.NaN);\n    volumeVwapSum = CompoundValue(1, volumeVwapSum[1] + volume * vwap, Double.NaN);\n    volumeVwap2Sum = CompoundValue(1, volumeVwap2Sum[1] + volume * Sqr(vwap), Double.NaN);\n}\ndef price = volumeVwapSum / volumeSum;\ndef deviation = Sqrt(Max(volumeVwap2Sum / volumeSum - Sqr(price), 0));\n\nplot VWAP = price;\nplot UpperBand = price + numDevUp * deviation;\nplot LowerBand = price + numDevDn * deviation;\n\nVWAP.SetDefaultColor(GetColor(0));\nUpperBand.SetDefaultColor(GetColor(2));\nLowerBand.SetDefaultColor(GetColor(4));&quot;,name=&quot;AnchoredVWAP&quot;})),+(!%4.CompiledStudy.resolveStudy(#%5.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%4.CompiledStudy.resolveStudy(#%5.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,&lt;F),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;WEEK&quot;)},inputsMap=@TreeMap0})}},!get(#%3.SubgraphId(&quot;Volume&quot;)){height=126,storableIndicators{+(!%4.CompiledStudy.resolveStudy(#%5.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;})),+(!%4.CompiledStudy.resolveStudy(#%5.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;}))}}}}" SYMBOL="COIN" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" AMAT="10.0" AMZN="10.0" ARM="10.0" COIN="10.0" MU="10.0" NFLX="10.0" QQQ="10.0" TLSA="10.0" TSLA="10.0" TSM="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" AMAT="1.0" AMZN="1.0" ARM="1.0" COIN="1.0" MU="1.0" NFLX="1.0" QQQ="1.0" TLSA="1.0" TSLA="1.0" TSM="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" AMAT="-1.0" AMZN="-1.0" ARM="-1.0" COIN="-1.0" MU="-1.0" NFLX="-1.0" QQQ="-1.0" TLSA="-1.0" TSLA="-1.0" TSM="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" AMAT="2.0" AMZN="2.0" ARM="2.0" COIN="2.0" MU="2.0" NFLX="2.0" QQQ="2.0" TLSA="2.0" TSLA="2.0" TSM="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" AMAT="-2.0" AMZN="-2.0" ARM="-2.0" COIN="-2.0" MU="-2.0" NFLX="-2.0" QQQ="-2.0" TLSA="-2.0" TSLA="-2.0" TSM="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" AMAT="3.0" AMZN="3.0" ARM="3.0" COIN="3.0" MU="3.0" NFLX="3.0" QQQ="3.0" TLSA="3.0" TSLA="3.0" TSM="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" AMAT="-3.0" AMZN="-3.0" ARM="-3.0" COIN="-3.0" MU="-3.0" NFLX="-3.0" QQQ="-3.0" TLSA="-3.0" TSLA="-3.0" TSM="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL1>
          <CELL2 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="PANW" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;m&quot;),colors{6::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=!%0.CustomColor.findByIndex(&quot;7&quot;),monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=323.68479403d,minValue=319.60144749d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=8.130081300813009d,visibleBarsCount=123},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=320,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor0}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="PANW" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" QTY_STEP="1.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="10.0" PANW="10.0" PLTR="10.0" TSLA="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL NVDA="1.0" PANW="1.0" PLTR="1.0" TSLA="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL NVDA="-1.0" PANW="-1.0" PLTR="-1.0" TSLA="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="2.0" PANW="2.0" PLTR="2.0" TSLA="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="-2.0" PANW="-2.0" PLTR="-2.0" TSLA="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="3.0" PANW="3.0" PLTR="3.0" TSLA="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL NVDA="-3.0" PANW="-3.0" PLTR="-3.0" TSLA="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL2>
          <CELL3 ROWSPANELWEIGHT="1.0" ROWWEIGHT0="1.0" ROWWEIGHT1="1.0" SELECTED_TYPE="CHART" SIDEBAR_IS_ACTIVE="true" SYMBOL="SMCI" SYMBOL_GROUP="-1" TRADE_BUTTONS_MIGRATED="true">
            <ACTIVETRADER VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <BIG_BUTTONS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <CHART CONFIGURATION="@v10@%0:com.devexperts.tos.thinkscript.data,1:com.devexperts.toschart.control.subgraph,2:com.devexperts.toschart.elstudies,3:com.devexperts.toschart.script%owner{chartAggregationPeriods.!get:ChartAggregationPeriod0(&quot;2m&quot;),colors{6::CustomColor0}}#com.devexperts.toschart.core.ChartModel{encodedMixinsState=&quot;{\&quot;common\&quot;:{\&quot;DRAWING_SETS\&quot;:\&quot;{}\&quot;},\&quot;state_props\&quot;:{\&quot;state_type\&quot;:\&quot;REGULAR\&quot;},\&quot;monkey_bars_exp\&quot;:{\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;},\&quot;monkey_bars\&quot;:{},\&quot;seasonality\&quot;:{},\&quot;regular\&quot;:{\&quot;DescriberMixin\&quot;:\&quot;{\\\&quot;visibility\\\&quot;:\\\&quot;HIDE_PANEL\\\&quot;,\\\&quot;studiesMode\\\&quot;:\\\&quot;HIDE_STUDIES\\\&quot;}\&quot;,\&quot;LikefolioMixin\&quot;:\&quot;{\\\&quot;paintingSettings\\\&quot;:{\\\&quot;neutralSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;positiveSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;negativeSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true},\\\&quot;sentimentSettings\\\&quot;:{\\\&quot;visible\\\&quot;:true}},\\\&quot;shownDivisions\\\&quot;:[96,-1,29579,92,701,95],\\\&quot;allDivisions\\\&quot;:[96,-1,29579,92,701,95]}\&quot;}}&quot;,encodedPatternsModel=&quot;{\&quot;showPatterns\&quot;:false,\&quot;models\&quot;:[],\&quot;fibModels\&quot;:[]}&quot;,groupId=&quot;default&quot;,styleSettings{chartAggregationSettings{priceAggregationSettings.timePeriod:ChartRange0,timeAggregationSettings=!com.devexperts.toschart.model.TimeFrameAggregationSettings.createTickOrTimeAggregation(@ChartRange0,@ChartAggregationPeriod0)},!isBindFplWithStrategies:Boolean0,commonStyleSettings{colorSettings{candleTrendTypeColors.!isFillDown:Boolean1,candleTypeColors.fillUp=@Boolean1,gridTypeColor=!%0.CustomColor.findByIndex(&quot;7&quot;),monkeyProfileTypeColors.defaultRowHeight=@Boolean0,mpExpandedTypeColors.defaultRowHeight=@Boolean0,volumeColor=#%0.CustomColor(#java.awt.Color(204,204,204,255))},expansion{down=10,right=10,up=10},fitPatterns=@Boolean1,fitStudiesToScreen=@Boolean0,leftAxisRegulator{maxValue=1.37796761334883E7d,minValue=1327041.02098087d},logScale=@Boolean1,manualAxisRegulator{maxValue=902.88197017d,minValue=876.90930393d},previousRightExpansion=10,shortCuts{^(&quot;Time Zone&quot;,@Boolean0),^(&quot;Show Expiration Friday &quot;,@Boolean0),^(&quot;Keep Price Zoom&quot;,@Boolean0),^(&quot;enableLeftAxis&quot;,@Boolean0),^(&quot;Fit expected price ranges&quot;,@Boolean0),^(&quot;emphasizeDigitMPExpanded&quot;,@Boolean0),^(&quot;showWicksCandleTrend&quot;,@Boolean0),^(&quot;highlightEarnings&quot;,@Boolean0),^(&quot;synchronizeCrosshair&quot;,@Boolean0),^(&quot;myToolsMode&quot;,@Boolean0),^(&quot;seasonalityStyle&quot;,@Boolean0),^(&quot;Show Price Subgraph&quot;,@Boolean0),^(&quot;closePriceLevel&quot;,@Boolean0),^(&quot;Color Volume As Symbol Ticks&quot;,@Boolean0),^(&quot;highlightPhantomRBars&quot;,@Boolean0),^(&quot;Cross type &quot;,@Boolean0),^(&quot;Fit Studies to Screen&quot;,@Boolean0),^(&quot;Fit Orders&quot;,@Boolean0),^(&quot;Bubbles as Percentage&quot;,@Boolean0),^(&quot;hideStatusString&quot;,@Boolean0),^(&quot;Show Studies &quot;,@Boolean0),^(&quot;showWicksHeikinAshi&quot;,@Boolean0),^(&quot;Alerts&quot;,@Boolean0),^(&quot;Chart scale&quot;,@Boolean0),^(&quot;Fit High/Low&quot;,@Boolean0),^(&quot;Orders&quot;,@Boolean0),^(&quot;Use Log Scale &quot;,@Boolean0),^(&quot;Fit Study Markers to Screen&quot;,@Boolean0),^(&quot;Fit Alerts&quot;,@Boolean0),^(&quot;Fit patterns&quot;,@Boolean0),^(&quot;Percentage View&quot;,@Boolean0),^(&quot;Make Auto Zoom &quot;,@Boolean0),^(&quot;Show Year Marking Line&quot;,@Boolean0),^(&quot;Show Rollover Line&quot;,@Boolean0),^(&quot;Show High/Low Bubbles &quot;,@Boolean0),^(&quot;highlightStudies&quot;,@Boolean0),^(&quot;Overlapped Volume&quot;,@Boolean0),^(&quot;Show Symbol Logo&quot;,@Boolean0),^(&quot;Show Last Price Bubble &quot;,@Boolean0),^(&quot;emphasizeDigitMP&quot;,@Boolean0),^(&quot;Snap crosshairs to&quot;,@Boolean0),^(&quot;Show grid&quot;,@Boolean0),^(&quot;showWicksCandle&quot;,@Boolean0),^(&quot;Show trades&quot;,@Boolean0),^(&quot;highlightSeasons&quot;,@Boolean0),^(&quot;Snap drawings to&quot;,@Boolean0),^(&quot;Extend Order/Alert Line to Left&quot;,@Boolean0)},step=10.638297872340425d},forexStyleSettings.shortCuts.^(&quot;Show Volume Subgraph&quot;,@Boolean0),futuresStyleSettings.shortCuts{^(&quot;adjustForContractChanges&quot;,@Boolean0),^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;showContractChangeEvents&quot;,@Boolean0),^(&quot;futures_daily_close_price&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},optionsStyleSettings.shortCuts{^(&quot;Show Open Interest&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Theo Price&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0)},otherStyleSettings{shortCuts{^(&quot;Show Social Sentiment&quot;,@Boolean0),^(&quot;Show Trading Hours Only&quot;,@Boolean0),^(&quot;Show Options&quot;,@Boolean0),^(&quot;Show Volume Subgraph&quot;,@Boolean0),^(&quot;Highlight Extended Hours&quot;,@Boolean0),^(&quot;Show Corporate Actions&quot;,@Boolean0),^(&quot;Show CNBC Video&quot;,@Boolean0),^(&quot;startAtMarketOpen&quot;,@Boolean0),^(&quot;adjustForDividends&quot;,@Boolean0)},tradingHoursOnly=@Boolean1},setsIdentifiers{studySetName=&quot;vol profile day&quot;,styleSetName=&quot;market hours  +expansion&quot;}},subgraphModels{!get(#%1.SubgraphId(&quot;Symbol&quot;)){height=320,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# TS_GapFill\n# thinkscripter@gmail.com\n# Last Update 28 Jan 2010\n# Last Update 16 Jan 2019 by Jerry Investor\n\ninput marketOpenTime = 0930;\ninput marketCloseTime = 1615;\n\ndef yesterdaysClose = close(period = \&quot;DAY\&quot; )[1];\n\ndef secondsFromOpen =  SecondsFromTime(marketOpenTime);\ndef secondsTillClose = SecondsTillTime(marketCloseTime);\ndef marketOpen = if secondsFromOpen &gt;= 0 and secondsTillClose &gt;= 0 then 1 else 0;\n\nrec regularHoursOpen = if (secondsFromOpen &gt;= 0 and secondsFromOpen[1] &lt; 0) or\n(GetDay() != GetDay()[1]) then open else regularHoursOpen[1];\n\ndef newDay = if GetDay() != GetDay()[1] then 1 else 0;\n\nrec regHoursHigh = if newDay then high else if marketOpen then\nif high &gt; regHoursHigh[1] then high else regHoursHigh[1] else high;\nrec regHoursLow = if newDay then low else if marketOpen then\nif low &lt; regHoursLow[1] then low else regHoursLow[1] else low;\n\ndef yc = if marketOpen then yesterdaysClose else Double.NaN;\ndef o = if marketOpen then regularHoursOpen else Double.NaN;\ndef hg = o + (yc - o) / 2;\n\ndef gapUp = if yc &lt; o then 1 else 0;\ndef gapDown = if yc &gt; o then 1 else 0;\n\ndef gapRemaining = if gapUp then\nMax(regHoursLow - yc, 0) else\nif gapDown then Max(yc - regHoursHigh, 0) else 0;\n\ndef percentRemaining = 100 * gapRemaining / AbsValue(yc - o);\ndef gapFilled = if percentRemaining == 0 then 1 else 0;\ndef halfGapFilled = if percentRemaining &lt;= 50 then 1 else 0;\n\nplot gH = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursLow else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen yc else Double.NaN;\nplot gL = if (gapUp and !gapFilled and marketOpen and !newDay[-1])\nthen yc else if (gapDown and !gapFilled and marketOpen and !newDay[-1])\nthen regHoursHigh else Double.NaN;\nplot hGF = if !gapFilled and !halfGapFilled and marketOpen and !newDay[-1]\nthen hg else Double.NaN;\n\ngH.SetPaintingStrategy(PaintingStrategy.DASHES);\ngH.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\ngL.SetPaintingStrategy(PaintingStrategy.DASHES);\ngL.AssignValueColor(if gapDown then Color.DARK_RED else Color.DARK_GREEN);\nhGF.SetStyle(Curve.LONG_DASH);\nhGF.SetDefaultColor(Color.DARK_GRAY);\ngH.HideBubble();\ngL.HideBubble();\nhGF.HideBubble();\n\nAddCloud(gH, gL, Color.VIOLET, Color.VIOLET);\nAddLabel(yes, Concat(percentRemaining, \&quot; % Gap Remaining\&quot; ),if percentRemaining  &gt; 0 then Color.green else Color.Red);\n&quot;,name=&quot;_9651f9e6_198d_429a_b223_83899ebbb4da&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2010-2024\n#\n\ninput pricePerRowHeightMode = {default AUTOMATIC, TICKSIZE, CUSTOM};\ninput customRowHeight = 1.0;\ninput timePerProfile = {default CHART, MINUTE, HOUR, DAY, WEEK, MONTH, \&quot;OPT EXP\&quot;, BAR};\ninput multiplier = 1;\ninput onExpansion = yes;\ninput profiles = 1000;\ninput showPointOfControl = yes;\ninput showValueArea = yes;\ninput valueAreaPercent = 70;\ninput opacity = 50;\n\ndef period;\ndef yyyymmdd = getYyyyMmDd();\ndef seconds = secondsFromTime(0);\ndef month = getYear() * 12 + getMonth();\ndef day_number = daysFromDate(first(yyyymmdd)) + getDayOfWeek(first(yyyymmdd));\ndef dom = getDayOfMonth(yyyymmdd);\ndef dow = getDayOfWeek(yyyymmdd - dom + 1);\ndef expthismonth = (if dow &gt; 5 then 27 else 20) - dow;\ndef exp_opt = month + (dom &gt; expthismonth);\nswitch (timePerProfile) {\ncase CHART:\n    period = 0;\ncase MINUTE:\n    period = floor(seconds / 60 + day_number * 24 * 60);\ncase HOUR:\n    period = floor(seconds / 3600 + day_number * 24);\ncase DAY:\n    period = countTradingDays(min(first(yyyymmdd), yyyymmdd), yyyymmdd) - 1;\ncase WEEK:\n    period = floor(day_number / 7);\ncase MONTH:\n    period = floor(month - first(month));\ncase \&quot;OPT EXP\&quot;:\n    period = exp_opt - first(exp_opt);\ncase BAR:\n    period = barNumber() - 1;\n}\n\ndef count = CompoundValue(1, if period != period[1] then (count[1] + period - period[1]) % multiplier else count[1], 0);\ndef cond = count &lt; count[1] + period - period[1];\ndef height;\nswitch (pricePerRowHeightMode) {\ncase AUTOMATIC:\n    height = PricePerRow.AUTOMATIC;\ncase TICKSIZE:\n    height = PricePerRow.TICKSIZE;\ncase CUSTOM:\n    height = customRowHeight;\n}\n\nprofile vol = volumeProfile(\&quot;startNewProfile\&quot; = cond, \&quot;onExpansion\&quot; = onExpansion, \&quot;numberOfProfiles\&quot; = profiles, \&quot;pricePerRow\&quot; = height, \&quot;value area percent\&quot; = valueAreaPercent);\ndef con = compoundValue(1, onExpansion, no);\ndef pc = if IsNaN(vol.getPointOfControl()) and con then pc[1] else vol.getPointOfControl();\ndef hVA = if IsNaN(vol.getHighestValueArea()) and con then hVA[1] else vol.getHighestValueArea();\ndef lVA = if IsNaN(vol.getLowestValueArea()) and con then lVA[1] else vol.getLowestValueArea();\n\ndef hProfile = if IsNaN(vol.getHighest()) and con then hProfile[1] else vol.getHighest();\ndef lProfile = if IsNaN(vol.getLowest()) and con then lProfile[1] else vol.getLowest();\ndef plotsDomain = IsNaN(close) == onExpansion;\n\nplot POC = if plotsDomain then pc else Double.NaN;\nplot ProfileHigh = if plotsDomain then hProfile else Double.NaN;\nplot ProfileLow = if plotsDomain then lProfile else Double.NaN;\nplot VAHigh = if plotsDomain then hVA else Double.NaN;\nplot VALow = if plotsDomain then lVA else Double.NaN;\n\nDefineGlobalColor(\&quot;Profile\&quot;, GetColor(1));\nDefineGlobalColor(\&quot;Point Of Control\&quot;, GetColor(5));\nDefineGlobalColor(\&quot;Value Area\&quot;, GetColor(8));\n\nvol.show(globalColor(\&quot;Profile\&quot;), if showPointOfControl then globalColor(\&quot;Point Of Control\&quot;) else color.current, if showValueArea then globalColor(\&quot;Value Area\&quot;) else color.current, opacity);\nPOC.SetDefaultColor(globalColor(\&quot;Point Of Control\&quot;));\nPOC.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVALow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nVAHigh.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nVALow.SetDefaultColor(globalColor(\&quot;Value Area\&quot;));\nProfileHigh.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileLow.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);\nProfileHigh.SetDefaultColor(GetColor(3));\nProfileLow.SetDefaultColor(GetColor(3));\nProfileHigh.hide();\nProfileLow.hide();&quot;,name=&quot;VolumeProfile&quot;}){inputsMap:TreeMap0{^(&quot;onExpansion&quot;,@Boolean0),^(&quot;opacity&quot;,20),^(&quot;timePerProfile&quot;,&quot;DAY&quot;)},inputsMap=@TreeMap0}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bullish = IsDescending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(4));\nBullish.SetLineWeight(2);&quot;,name=&quot;Hammer&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n#wizard text: body factor:\n#wizard input: bodyFactor\n#wizard text: shadow factor:\n#wizard input: shadowFactor\n\ninput length = 20;\ninput trendSetup = 3;\ninput bodyFactor = 0.3;\ninput shadowFactor = 2.0;\n\nassert(bodyFactor &gt;= 0, \&quot;\'body factor\' must not be negative: \&quot; + bodyFactor);\nassert(shadowFactor &gt;= 0, \&quot;\'shadow factor\' must not be negative: \&quot; + shadowFactor);\n\ndef BodyHeight = BodyHeight();\ndef AverageBodyHeight = Average(BodyHeight, length);\ndef ErrMargin = 0.05 * AverageBodyHeight;\ndef IsShort = BodyHeight &lt; bodyFactor * AverageBodyHeight;\n\nplot Bearish = IsAscending(close, trendSetup) and\n    IsShort and\n    high - Max(open, close) &lt;= ErrMargin and\n    Min(open, close) - low &gt; shadowFactor * BodyHeight;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);&quot;,name=&quot;HangingMan&quot;}){hidden=@Boolean1,plots{0:{color=!%0.CustomColor.findByIndex(&quot;17&quot;)}}}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n\ninput length = 20;\n\ndef ErrMargin = 0.05 * Average(BodyHeight(), length);\n\nplot Bearish = IsLongBlack(length) and\n    high - open &lt;= ErrMargin and\n    close - low &lt;= ErrMargin;\n\nplot Bullish = IsLongWhite(length) and\n    open - low &lt;= ErrMargin and\n    high - close &lt;= ErrMargin;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(7));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(8));\nBullish.SetLineWeight(2);&quot;,name=&quot;Marubozu&quot;}){hidden=@Boolean1}),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @new\n# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2011-2024\n#\n#wizard plots\n#wizard text: Inputs: length:\n#wizard input: length\n#wizard text: trend setup:\n#wizard input: trendSetup\n\ninput length = 20;\ninput trendSetup = 3;\n\ndef BodyMax = Max(open, close);\ndef BodyMin = Min(open, close);\ndef IsEngulfing = BodyMax &gt; BodyMax[1] and\n    BodyMin &lt; BodyMin[1];\ndef IsWhite = open &lt; close;\ndef IsBlack = open &gt; close;\ndef IsPrevDoji = IsDoji(length)[1];\n\nplot Bearish = IsAscending(close, trendSetup)[1] and\n    (IsWhite[1] or IsPrevDoji) and\n    IsBlack and\n    IsEngulfing;\n\nplot Bullish = IsDescending(close, trendSetup)[1] and\n    (IsBlack[1] or IsPrevDoji) and\n    IsWhite and\n    IsEngulfing;\n\nBearish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_DOWN);\nBearish.SetDefaultColor(GetColor(1));\nBearish.SetLineWeight(2);\nBullish.SetPaintingStrategy(PaintingStrategy.BOOLEAN_ARROW_UP);\nBullish.SetDefaultColor(GetColor(2));\nBullish.SetLineWeight(2);&quot;,name=&quot;Engulfing&quot;}){hidden=@Boolean1,plots{0:{color=@CustomColor0}}})}},!get(#%1.SubgraphId(&quot;Volume&quot;)){height=124,storableIndicators{+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;# @reference\n#\n# TD Ameritrade IP Company, Inc. (c) 2007-2024\n#\n\ndeclare lower;\ndeclare zerobase;\n\ninput length = 50;\n\nplot Vol = volume;\nplot VolAvg = Average(volume, length);\n\nVol.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);\nVol.SetLineWeight(3);\nVol.DefineColor(\&quot;Up\&quot;, Color.UPTICK);\nVol.DefineColor(\&quot;Down\&quot;, Color.DOWNTICK);\nVol.AssignValueColor(if close &gt; close[1] then Vol.color(\&quot;Up\&quot;) else if close &lt; close[1] then Vol.color(\&quot;Down\&quot;) else GetColor(1));\nVolAvg.SetDefaultColor(GetColor(8));&quot;,name=&quot;VolumeAvg&quot;})),+(!%2.CompiledStudy.resolveStudy(#%3.ScriptEssence{body=&quot;#//@version=4\n#// A Cumulative Volume Delta approach based on the Bull and Bear Balance Indicator by Vadim Gimelfarb published in the October 2003 issue of the S&amp;C Magazine.\n#// Adjust the length of the moving average according to your needs (Symbol, Timeframe, etc.)\n\n#study(title=\&quot;Cumulative Volume Delta\&quot;, shorttitle=\&quot;CVD\&quot;, precision=0)\n\ndeclare lower;\n#// Inputs\ninput periodMa = 100;#input(title=\&quot;MA Length\&quot;, minval=1, defval=100)\ninput plotMa   = yes;#input(title=\&quot;Plot MA?\&quot;, defval=false)\n#// Calculations (Bull &amp; Bear Balance Indicator by Vadim Gimelfarb)\n\ndef bullPower = if(close &lt; open, if(close[1] &lt; open, max(high - close[1], close - low), max(high - open, close - low)), if(close &gt; open, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(high - close &gt; close - low, if(close[1] &lt; open, max(high - close[1], close - low), high - open), if(high - close &lt; close - low, if(close[1] &gt; open, high - low, max(open - close[1], high - low)), if(close[1] &gt; open, max(high - open, close - low), if(close[1] &lt; open, max(open - close[1], high - low), high-low))))));\n\ndef bearPower = if(close &lt; open, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(close &gt; open, if(close[1] &gt; open, max(close[1] - low, high - close), max(open - low, high - close)), if(high - close &gt; close - low, if(close[1] &gt; open, max(close[1] - open, high - low), high - low), if(high - close &lt; close - low, if(close[1] &gt; open, max(close[1] - low, high - close), open - low), if(close[1] &gt; open, max(close[1] - open, high - low), if(close[1] &lt; open, max(open - low, high - close), high - low))))));\n\n#// Calculations (Bull &amp; Bear Pressure Volume)\n\ndef bullVolume = (bullPower / (bullPower + bearPower)) * volume;\ndef bearVolume = (bearPower / (bullPower + bearPower)) * volume;\n\n#// Calculations Delta\ndef delta = if isnan(close) then delta[1] else bullVolume - bearVolume;\ndef cvd   = if barnumber()==1 then delta else if barnumber()&gt;1 then cvd[1] + delta else cvd[1];\ndef cvdMa = simpleMovingAvg(cvd, periodMa);\n\n#// Plotting\n#customColor = cvd &gt; cvdMa ? color.new(color.teal, 50) : color.new(color.red, 50)\nplot Ref1 = cvd;#plot(cvd, style=plot.style_line, linewidth=1, color=color.black, title=\&quot;CVD\&quot;)\nplot Ref2 = if plotMa then cvdMa else double.nan;#, style=plot.style_line, linewidth=1, color=color.new(color.black, 0), title=\&quot;CVD MA\&quot;)\n#fill(plotRef1, plotRef2, color=customColor)\naddcloud(ref1,ref2,color.green,color.red);&quot;,name=&quot;_71bb69b6_4c8b_45fb_b925_82cf25c3ec06&quot;}))}}}}" SYMBOL="SMCI" SYMBOL_GROUP="-1" VERTICAL="false" VISIBLE="true" WEIGHT="1.0"/>
            <DASHBOARD VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LEVEL_II VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <LIVE_NEWS VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <PHASE_SCORES VERTICAL="false" VISIBLE="false" WEIGHT="2.0"/>
            <TIME_SALES VERTICAL="false" VISIBLE="false" WEIGHT="1.0"/>
            <TRADE CONFIGURATION_NAME="SINGLE" ORDER_RULES_SET="STOCK" ORDER_TYPE="LIMIT" OS_AUTO="false" OS_EXPANDED="false" OS_TIF="DAY" QTY="100.0" TEMPLATE="SINGLE" TRADE_BUTTONS="BUY_MKT;SELL_MKT;MULTI_CANCEL;REVERSE;FLAT;SECOND_LINE;QUANTITY;AUTO_SEND;ORDER_SETUP" VISIBLE="false">
              <OCO_STOP>
                <TRG_0 TRG_ENBL="true" TRG_LINK="ASK_BID" TRG_OFFSET_MODE="TICK" TRG_OT="STOP" TRG_SETUP="10.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="10.0" COIN="10.0" SMCI="10.0" TSM="10.0" VXX="10.0"/>
                </TRG_0>
              </OCO_STOP>
              <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="1.0" COIN="1.0" SMCI="1.0" TSM="1.0" VXX="1.0"/>
              </TRG_0>
              <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-1.0" TRG_TIF="DAY">
                <OFFSET_PER_SYMBOL AAPL="-1.0" COIN="-1.0" SMCI="-1.0" TSM="-1.0" VXX="-1.0"/>
              </TRG_1>
              <_2>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="2.0" COIN="2.0" SMCI="2.0" TSM="2.0" VXX="2.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-2.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-2.0" COIN="-2.0" SMCI="-2.0" TSM="-2.0" VXX="-2.0"/>
                </TRG_1>
              </_2>
              <_3>
                <TRG_0 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="LIMIT" TRG_SETUP="3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="3.0" COIN="3.0" SMCI="3.0" TSM="3.0" VXX="3.0"/>
                </TRG_0>
                <TRG_1 TRG_ENBL="true" TRG_LINK="TRG" TRG_OFFSET_MODE="ABSOLUTE" TRG_OT="STOP" TRG_SETUP="-3.0" TRG_TIF="DAY">
                  <OFFSET_PER_SYMBOL AAPL="-3.0" COIN="-3.0" SMCI="-3.0" TSM="-3.0" VXX="-3.0"/>
                </TRG_1>
              </_3>
            </TRADE>
          </CELL3>
          <MODELNODE0 COUNT="2" ROWLAYOUT="false" TYPE="SPLIT" WEIGHT="0.0">
            <MODELNODE0 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.5004906771344455">
              <MODELNODE0 COMPOSITENAME="CELL0" NAME="0" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL1" NAME="1" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE0>
            <MODELNODE1 COUNT="2" ROWLAYOUT="true" TYPE="SPLIT" WEIGHT="0.49950932286555444">
              <MODELNODE0 COMPOSITENAME="CELL2" NAME="2" TYPE="LEAF" WEIGHT="0.5"/>
              <MODELNODE1 COMPOSITENAME="CELL3" NAME="3" TYPE="LEAF" WEIGHT="0.5"/>
            </MODELNODE1>
          </MODELNODE0>
        </TOS_CHARTS>
      </DETACHED_FRAME_3>
      <LINES LEVEL="Beginner" RAPID="false"/>
      <MESSAGE_CENTER_LAYOUT>
        <SORTING COLUMN="TIME" ORDER="1"/>
      </MESSAGE_CENTER_LAYOUT>
      <MINESWEEPER BOMBS="10" COLUMNS="9" LEVEL="Beginner" QMARK="false" ROWS="9"/>
      <TETRIS LEVEL="Beginner" ROTATE="false"/>
    </DETACHED_FRAME_0>
    <MESSAGE_CENTER_MESSAGES MESSAGE_CENTER_MESSAGES_COUNT="75">
      <MESSAGE_0 ACCOUNTCODE="55769981SCHW" BODY="You have made 1 day trade(s) in the last 5 business days. You are allowed to make 2 more day trade(s) in this period." DATE="1716209639506" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_1 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716209639506" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_10 ACCOUNTCODE="" BODY="FFIE mark is at or below $1.30 Mark = 1.30; Impl vol = 512.36%." DATE="1716218395511" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_11 ACCOUNTCODE="" BODY="QQQ mark is at or below $453.98 Mark = 453.97; Impl vol = 16.35%." DATE="1716228503482" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_12 ACCOUNTCODE="" BODY="$TICK mark is at or below $-1000.00 Mark = -1037.00; Impl vol = N/A." DATE="1716228505693" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_13 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP BUY +1 VERTICAL META 100 (Weeklys) 24 MAY 24 475/472.5 PUT @1.55 LMT [TO CLOSE/TO CLOSE]" DATE="1716232310433" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_14 ACCOUNTCODE="55769981SCHW" BODY="tIP BOT +1 VERTICAL META 100 (Weeklys) 24 MAY 24 475/472.5 PUT @1.55" DATE="1716232700241" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_15 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716250915602" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_16 ACCOUNTCODE="55769981SCHW" ADMINCOMPOSED="false" BODY="You have made 1 day trade(s) in the last 5 business days. You are allowed to make 2 more day trade(s) in this period." DATE="1716250915602" MESSAGEID="0" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_17 ACCOUNTCODE="55769981SCHW" BODY="You have made 0 day trade(s) in the last 5 business days. You are allowed to make 3 more day trade(s) in this period." DATE="1716266144503" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_18 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716266144509" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_19 ACCOUNTCODE="55769981SCHW" BODY="You have made 1 day trade(s) in the last 5 business days. You are allowed to make 2 more day trade(s) in this period." DATE="1716291914869" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_2 ACCOUNTCODE="" BODY="NVDA mark is at or above $934.14 Mark = 937.50; Impl vol = 59.13%." DATE="1716211800810" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_20 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716291914876" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_21 ACCOUNTCODE="" BODY="GOOG mark is at or below $177.51 Mark = 177.51; Impl vol = 21.59%." DATE="1716298275114" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_22 ACCOUNTCODE="" BODY="PLTR mark is at or below $21.18 Mark = 21.18; Impl vol = 45.23%." DATE="1716298681675" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_23 ACCOUNTCODE="" BODY="AAPL mark is at or above $192.00 Mark = 192.00; Impl vol = 19.86%." DATE="1716299781270" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_24 ACCOUNTCODE="" BODY="COIN mark is at or below $220.82 Mark = 220.8112; Impl vol = 85.63%." DATE="1716304013343" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_25 ACCOUNTCODE="" BODY="NFLX mark is at or below $643.55 Mark = 643.5388; Impl vol = 26.99%." DATE="1716309473961" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_26 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP BUY +1 PANW 100 (Weeklys) 24 MAY 24 320 CALL @3.20 LMT [TO OPEN]" DATE="1716309765930" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_27 ACCOUNTCODE="55769981SCHW" BODY="tIP BOT +1 PANW 100 (Weeklys) 24 MAY 24 320 CALL @3.09" DATE="1716309766156" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_28 ACCOUNTCODE="55769981SCHW" BODY="CANCELED tIP SELL -1 PANW 100 (Weeklys) 24 MAY 24 320 CALL TRSTP MARK-.35 (STP 3.43) MARK [TO CLOSE]" DATE="1716311204257" PRIORITY="10" TYPE="ORDER_NOT_FILLED" UNREAD="false"/>
      <MESSAGE_29 ACCOUNTCODE="" BODY="MSFT mark is at or below $429.32 Mark = 429.28; Impl vol = 18.10%." DATE="1716315933208" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_3 ACCOUNTCODE="" BODY="SMCI mark is at or above $900.76 Mark = 901.00; Impl vol = 74.51%." DATE="1716211803013" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_30 ACCOUNTCODE="" BODY="MSFT mark is at or below $428.85 Mark = 428.82; Impl vol = 18.08%." DATE="1716319624064" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_31 ACCOUNTCODE="55769981SCHW" BODY="You have made 0 day trade(s) in the last 5 business days. You are allowed to make 3 more day trade(s) in this period." DATE="1716352263656" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_32 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716352263661" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_33 ACCOUNTCODE="55769981SCHW" BODY="You have made 1 day trade(s) in the last 5 business days. You are allowed to make 2 more day trade(s) in this period." DATE="1716369593979" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_34 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716369593985" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_35 ACCOUNTCODE="" BODY="GOOG mark is at or below $177.54 Mark = 177.54; Impl vol = 22.83%." DATE="1716385280646" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_36 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP BUY +1 MSFT 100 (Weeklys) 24 MAY 24 432.5 CALL @2.95 LMT [TO OPEN]" DATE="1716386626327" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_37 ACCOUNTCODE="55769981SCHW" BODY="tIP BOT +1 MSFT 100 (Weeklys) 24 MAY 24 432.5 CALL @2.95" DATE="1716386626512" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_38 ACCOUNTCODE="" BODY="SMCI mark is at or below $930.10 Mark = 897.33; Impl vol = 74.21%." DATE="1716387507263" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_39 ACCOUNTCODE="" BODY="PANW mark is at or below $307.86 Mark = 307.8301; Impl vol = 32.09%." DATE="1716388922640" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_4 ACCOUNTCODE="" BODY="JPM mark is at or above $205.32 Mark = 205.38; Impl vol = 19.09%." DATE="1716211832739" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_40 ACCOUNTCODE="" BODY="MSFT mark is at or below $431.23 Mark = 431.22; Impl vol = 18.00%." DATE="1716389764875" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_41 ACCOUNTCODE="" BODY="SMCI mark is at or below $888.75 Mark = 888.60; Impl vol = 74.31%." DATE="1716399425489" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_42 ACCOUNTCODE="" BODY="AMZN last is at or below $182.75 Mark = 182.75; Impl vol = 24.01%." DATE="1716399429686" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_43 ACCOUNTCODE="" BODY="/NQM24 last is at or below $18760.19 Mark = 18760.00; Impl vol = 16.49%." DATE="1716399863073" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_44 ACCOUNTCODE="" BODY="NFLX mark is at or below $639.18 Mark = 639.10; Impl vol = 27.06%." DATE="1716400986890" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_45 ACCOUNTCODE="55769981SCHW" BODY="You have made 0 day trade(s) in the last 5 business days. You are allowed to make 3 more day trade(s) in this period." DATE="1716440680696" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_46 ACCOUNTCODE="55769981SCHW" BODY="NYSE/FINRA day trading rules apply only to accounts under $25K. Please contact a CHARLES SCHWAB Client Services Representative at 800-435-9050 if you have questions." DATE="1716440680701" PRIORITY="10" TYPE="ANNOUNCEMENT" UNREAD="false"/>
      <MESSAGE_47 ACCOUNTCODE="" BODY="META mark is at or above $463.04 Mark = 472.13; Impl vol = 28.13%." DATE="1716471007127" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_48 ACCOUNTCODE="" BODY="COIN mark is at or below $224.72 Mark = 224.70; Impl vol = 95.40%." DATE="1716471613305" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_49 ACCOUNTCODE="" BODY="PLTR mark is at or below $20.78 Mark = 20.78; Impl vol = 44.76%." DATE="1716472334523" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_5 ACCOUNTCODE="" BODY="SMCI mark is at or above $911.65 Mark = 911.7072; Impl vol = 72.54%." DATE="1716211954788" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_50 ACCOUNTCODE="" BODY="PLTR last is at or below $20.73 Mark = 20.73; Impl vol = 44.04%." DATE="1716472903763" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_51 ACCOUNTCODE="" BODY="AMD mark is at or below $162.25 Mark = 162.25; Impl vol = 41.52%." DATE="1716475388631" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_52 ACCOUNTCODE="" BODY="SPY mark is at or above $531.27 Mark = 531.28; Impl vol = 12.36%." DATE="1716479584600" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_53 ACCOUNTCODE="" BODY="SMCI mark is at or below $866.00 Mark = 865.50; Impl vol = 71.17%." DATE="1716487436710" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_54 ACCOUNTCODE="" BODY="CB mark is at or below $262.76 Mark = 262.72; Impl vol = 17.73%." DATE="1716487502448" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_55 ACCOUNTCODE="" BODY="COIN mark is at or below $220.36 Mark = 220.34; Impl vol = 77.36%." DATE="1716488351354" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_56 ACCOUNTCODE="55769981SCHW" BODY="REJECTED: Outside of regular market hours, market option orders for opening transactions are not permitted. Charles Schwab accepts market, limit, stop and stop-limit option orders during regular market hours. tIP BUY +1 SPY 100 28 MAY 24 528 CALL MKT [TO OPEN]" DATE="1716554702655" PRIORITY="10" TYPE="ORDER_NOT_FILLED" UNREAD="false"/>
      <MESSAGE_57 ACCOUNTCODE="55769981SCHW" BODY="CANCELED tIP BUY +1 SPY 100 28 MAY 24 528 CALL @1.08 LMT [TO OPEN]" DATE="1716554768826" PRIORITY="10" TYPE="ORDER_NOT_FILLED" UNREAD="false"/>
      <MESSAGE_58 ACCOUNTCODE="" BODY="QQQ last is at or above $453.00 Mark = 455.31; Impl vol = 16.84%." DATE="1716557400793" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_59 ACCOUNTCODE="" BODY="$TICK mark is at or above $1000.00 Mark = 1486.00; Impl vol = N/A." DATE="1716557417294" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_6 ACCOUNTCODE="" BODY="NVDA mark is at or above $941.31 Mark = 941.33; Impl vol = 58.96%." DATE="1716211957253" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_60 ACCOUNTCODE="" BODY="AMD last is at or below $160.60 Mark = 160.60; Impl vol = 41.43%." DATE="1716557496437" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_61 ACCOUNTCODE="" BODY="$TICK mark is below $1000.00 Mark = 974.00; Impl vol = N/A." DATE="1716557601695" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_62 ACCOUNTCODE="" BODY="SMCI last is at or below $847.32 Mark = 847.30; Impl vol = 70.86%." DATE="1716557798879" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_63 ACCOUNTCODE="" BODY="$TICK mark is at or above $1000.00 Mark = 1009.00; Impl vol = N/A." DATE="1716557865492" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_64 ACCOUNTCODE="" BODY="$TICK mark is below $1000.00 Mark = 994.00; Impl vol = N/A." DATE="1716557945345" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_65 ACCOUNTCODE="" BODY="SMCI last is at or above $873.00 Mark = 873.00; Impl vol = 70.64%." DATE="1716560177192" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_66 ACCOUNTCODE="" BODY="SMCI mark is at or below $871.00 Mark = 870.84; Impl vol = 70.74%." DATE="1716560492581" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_67 ACCOUNTCODE="" BODY="$TICK mark is at or above $1000.00 Mark = 1007.00; Impl vol = N/A." DATE="1716563055679" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_68 ACCOUNTCODE="" BODY="$TICK mark is below $1000.00 Mark = 870.00; Impl vol = N/A." DATE="1716563115707" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_69 ACCOUNTCODE="55769981SCHW" BODY="CANCELED tIP SELL -1 PANW 100 (Weeklys) 24 MAY 24 320 CALL TRSTP MARK-.14 (STP 1.38) MARK [TO CLOSE]" DATE="1716563327771" PRIORITY="10" TYPE="ORDER_NOT_FILLED" UNREAD="false"/>
      <MESSAGE_7 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP BUY +1 VERTICAL MSFT 100 (Weeklys) 24 MAY 24 425/422.5 PUT @.97 LMT [TO CLOSE/TO CLOSE]" DATE="1716213279911" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_70 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP (Replacing #1000584205157) SELL -1 PANW 100 (Weeklys) 24 MAY 24 320 CALL TRSTP MARK-.10 (STP 1.56) MARK [TO CLOSE]" DATE="1716563372114" PRIORITY="10" TYPE="ORDER_FILLED_SELL" UNREAD="false"/>
      <MESSAGE_71 ACCOUNTCODE="55769981SCHW" BODY="tIP SOLD -1 PANW 100 (Weeklys) 24 MAY 24 320 CALL @1.59" DATE="1716563398568" PRIORITY="10" TYPE="ORDER_FILLED_SELL" UNREAD="false"/>
      <MESSAGE_72 ACCOUNTCODE="55769981SCHW" BODY="FILLED tIP SELL -1 MSFT 100 (Weeklys) 24 MAY 24 432.5 CALL TRSTP MARK-.05 (STP .10) MARK [TO CLOSE]" DATE="1716563430861" PRIORITY="10" TYPE="ORDER_FILLED_SELL" UNREAD="false"/>
      <MESSAGE_73 ACCOUNTCODE="55769981SCHW" BODY="tIP SOLD -1 MSFT 100 (Weeklys) 24 MAY 24 432.5 CALL @.10" DATE="1716564482234" PRIORITY="10" TYPE="ORDER_FILLED_SELL" UNREAD="false"/>
      <MESSAGE_74 ACCOUNTCODE="" BODY="SMCI last is at or below $874.57 Mark = 874.00; Impl vol = 69.86%." DATE="1716565105537" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
      <MESSAGE_8 ACCOUNTCODE="55769981SCHW" BODY="tIP BOT +1 VERTICAL MSFT 100 (Weeklys) 24 MAY 24 425/422.5 PUT @.97" DATE="1716213383112" PRIORITY="10" TYPE="ORDER_FILLED_BUY" UNREAD="false"/>
      <MESSAGE_9 ACCOUNTCODE="" BODY="SMCI mark is at or below $874.14 Mark = 874.01; Impl vol = 74.77%." DATE="1716217046907" PRIORITY="10" TYPE="ALERT" UNREAD="false"/>
    </MESSAGE_CENTER_MESSAGES>
  </WORKSPACE>
</PREFERENCES>
